!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=33)}([function(e,t){e.exports=React},function(e,t,r){"use strict";var n=function(e,t,r,n,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,n,o,i,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return f[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n=r(55),o=r(56),i=r(16),a=r(4),s=r(17),u=r(7);e.exports={createComponent:n,createSurface:o,Node:i,Shaders:a,Uniform:s,runtime:u}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(1),a=1,s={},u={},f={},c={},l={},h={},p={},d=function(){var e={},t=new Promise(function(t,r){e.resolve=t,e.reject=r});return e.promise=t,e}(),_=d.promise,g=function(e){var t=w(u,e),r=t||a++,n=void 0;return t?n=f[r]:(s[r]=e.name,u[r]=e,l[r]=0,f[r]=n=_.then(function(t){return t.add(r,e)}).then(function(e){return c[r]=e})),{id:r,promise:n}},v=function(e){delete u[e],delete s[e],delete l[e],delete f[e],_.then(function(t){return t.remove(e)})},m=function(){return Object.keys(l).filter(function(e){return l[e]<=0}).map(function(e){return parseInt(e,10)})},y=void 0,E=function(){clearTimeout(y),m().forEach(v)},b=function(){m().length>20||clearTimeout(y),y=setTimeout(E,500)},T=function(e,t){return e.frag===t.frag},w=function(e,t){for(var r in e)if(T(e[r],t))return parseInt(r,10);return null},A=function(e){return function(t){return console.error("Shader '"+e.name+"' failed to compile:\n"+t)}},R={_onSurfaceWillMount:function(e){h[e]=[]},_onSurfaceWillUnmount:function(e){h[e].forEach(function(e){return l[e]--}),delete h[e],delete p[e],b()},_beforeSurfaceBuild:function(e){p[e]=h[e],h[e]=[]},_resolve:function(e,t,r){if("number"==typeof e)return e;var n=g(o({name:"<inline>"},e)),i=n.id,a=n.promise;return r?a.then(function(e){return r(null,e)},function(e){return r(e)}):a.catch(A(R.get(i))),h[t].push(i),i},_afterSurfaceBuild:function(e){p[e].forEach(function(e){return l[e]--}),h[e].forEach(function(e){return l[e]++}),delete p[e],b()},create:function(e,t){i("object"===(void 0===e?"undefined":n(e)),"config must be an object");var r={},a={},s={};return Promise.all(Object.keys(e).map(function(t){var u=e[t];i("object"===(void 0===u?"undefined":n(u))&&"string"==typeof u.frag,"invalid shader given to Shaders.create(). A valid shader is a { frag: String }");var f=g(o({name:t},u)),c=f.id,h=f.promise;return r[t]=c,l[c]++,h.then(function(e){return s[t]=e},function(e){return a[t]=e})})).then(function(){t?t(Object.keys(a).length?a:null,s):Object.keys(a).forEach(function(e){return A(R.get(r[e]))(a[e])})}),r},get:function(e){return Object.freeze(u[e])},getCompilationResult:function(e){return c[e]||null},getCompilationPromise:function(e){return f[e]||null},list:function(){return Object.keys(u)},exists:function(e){return e in u},gcNow:E,setImplementation:function(e){i(d,"Shaders.setImplementation can be called only once"),d.resolve(e),d=null},implementation:_};e.exports=Object.freeze(R)},function(e,t){function r(e,t,r){this.shortMessage=t||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:""),this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,e.exports=r},function(e,t,r){"use strict";var n=r(94);e.exports=n("pointer-events")},function(e,t,r){"use strict";e.exports={decorateVDOMContent:function(e){return e},decorateUniformValue:function(e){return e}}},function(e,t,r){"use strict";function n(e){g=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],v=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],m=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function o(e,t,r){var n=e.gl,o=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>o||r<0||r>o)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function i(e,t,r,n,o,i){this.gl=e,this.handle=t,this.format=o,this.type=i,this._shape=[r,n],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(e){return a.wrapS=e}},{get:function(){return a._wrapT},set:function(e){return a.wrapT=e}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return a._shape[0]},set:function(e){return a.width=e}},{get:function(){return a._shape[1]},set:function(e){return a.height=e}}]),this._shapeVector=u}function a(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function s(e,t,r,n,o,i,s,u){var f=u.dtype,c=u.shape.slice();if(c.length<2||c.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var l=0,h=0,g=a(c,u.stride.slice());"float32"===f?l=e.FLOAT:"float64"===f?(l=e.FLOAT,g=!1,f="float32"):"uint8"===f?l=e.UNSIGNED_BYTE:(l=e.UNSIGNED_BYTE,g=!1,f="uint8");if(2===c.length)h=e.LUMINANCE,c=[c[0],c[1],1],u=p(u.data,c,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==c.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===c[2])h=e.ALPHA;else if(2===c[2])h=e.LUMINANCE_ALPHA;else if(3===c[2])h=e.RGB;else{if(4!==c[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=e.RGBA}c[2]}if(h!==e.LUMINANCE&&h!==e.ALPHA||o!==e.LUMINANCE&&o!==e.ALPHA||(h=o),h!==o)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var v=u.size,m=s.indexOf(n)<0;if(m&&s.push(n),l===i&&g)0===u.offset&&u.data.length===v?m?e.texImage2D(e.TEXTURE_2D,n,o,c[0],c[1],0,o,i,u.data):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],o,i,u.data):m?e.texImage2D(e.TEXTURE_2D,n,o,c[0],c[1],0,o,i,u.data.subarray(u.offset,u.offset+v)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],o,i,u.data.subarray(u.offset,u.offset+v));else{var E;E=i===e.FLOAT?_.mallocFloat32(v):_.mallocUint8(v);var b=p(E,c,[c[2],c[2]*c[0],1]);l===e.FLOAT&&i===e.UNSIGNED_BYTE?y(b,u):d.assign(b,u),m?e.texImage2D(e.TEXTURE_2D,n,o,c[0],c[1],0,o,i,E.subarray(0,v)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],o,i,E.subarray(0,v)),i===e.FLOAT?_.freeFloat32(E):_.freeUint8(E)}}function u(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function f(e,t,r,n,o){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(o===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var s=u(e);return e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,o,null),new i(e,s,t,r,n,o)}function c(e,t,r,n){var o=u(e);return e.texImage2D(e.TEXTURE_2D,0,r,r,n,t),new i(e,o,0|t.width,0|t.height,r,n)}function l(e,t){var r=t.dtype,n=t.shape.slice(),o=e.getParameter(e.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>o||n[1]<0||n[1]>o)throw new Error("gl-texture2d: Invalid texture size");var s=a(n,t.stride.slice()),f=0;"float32"===r?f=e.FLOAT:"float64"===r?(f=e.FLOAT,s=!1,r="float32"):"uint8"===r?f=e.UNSIGNED_BYTE:(f=e.UNSIGNED_BYTE,s=!1,r="uint8");var c=0;if(2===n.length)c=e.LUMINANCE,n=[n[0],n[1],1],t=p(t.data,n,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])c=e.ALPHA;else if(2===n[2])c=e.LUMINANCE_ALPHA;else if(3===n[2])c=e.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");c=e.RGBA}}f!==e.FLOAT||e.getExtension("OES_texture_float")||(f=e.UNSIGNED_BYTE,s=!1);var l,h,g=t.size;if(s)l=0===t.offset&&t.data.length===g?t.data:t.data.subarray(t.offset,t.offset+g);else{var v=[n[2],n[2]*n[0],1];h=_.malloc(g,r);var m=p(h,n,v,0);"float32"!==r&&"float64"!==r||f!==e.UNSIGNED_BYTE?d.assign(m,t):y(m,t),l=h.subarray(0,g)}var E=u(e);return e.texImage2D(e.TEXTURE_2D,0,c,n[0],n[1],0,c,f,l),s||_.free(h),new i(e,E,n[0],n[1],c,f)}function h(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(g||n(e),"number"==typeof arguments[1])return f(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return f(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData)return c(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return l(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var p=r(85),d=r(84),_=r(27);e.exports=h;var g=null,v=null,m=null,y=function(e,t){d.muls(e,t,255)},E=i.prototype;Object.defineProperties(E,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&g.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),v.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&g.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),v.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),m.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),m.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(m.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return o(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e|=0,o(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,o(this,this._shape[0],e),e}}}),E.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},E.dispose=function(){this.gl.deleteTexture(this.handle)},E.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},E.setPixels=function(e,t,r,n){var o=this.gl;if(this.bind(),Array.isArray(t)?(n=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),n=n||0,e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){this._mipLevels.indexOf(n)<0?(o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,this.type,e),this._mipLevels.push(n)):o.texSubImage2D(o.TEXTURE_2D,n,t,r,this.format,this.type,e)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");s(o,t,r,n,this.format,this.type,this._mipLevels,e)}}},function(e,t,r){(function(t){for(var n=r(26),o="undefined"==typeof window?t:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],u=o["cancel"+a]||o["cancelRequest"+a],f=0;!s&&f<i.length;f++)s=o[i[f]+"Request"+a],u=o[i[f]+"Cancel"+a]||o[i[f]+"CancelRequest"+a];if(!s||!u){var c=0,l=0,h=[];s=function(e){if(0===h.length){var t=n(),r=Math.max(0,1e3/60-(t-c));c=r+t,setTimeout(function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(r))}return h.push({handle:++l,callback:e,cancelled:!1}),l},u=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){u.apply(o,arguments)},e.exports.polyfill=function(){o.requestAnimationFrame=s,o.cancelAnimationFrame=u}}).call(t,r(2))},function(e,t){e.exports=ReactDOM},function(e,t,r){"use strict";function n(e){return{top:o(e.marginTop),right:o(e.marginRight),bottom:o(e.marginBottom),left:o(e.marginLeft)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=function(e){return parseInt(e)||0};e.exports=t.default},function(e,t,r){"use strict";function n(e){c=e,l.splice(e).forEach(function(e){return e.dispose(!0)})}function o(){l.splice(0).forEach(function(e){return e.dispose(!0)})}function i(e){var t=void 0;if(l.length>0)t=l.splice(l.length-1)[0];else{var r=function(){var e=document.createElement("canvas");e.style[u]="none",e.style.width="100%",e.style.height="100%";var r={},n=f(e,r);if(!n)return{v:null};var o=function(r){e.parentNode&&e.parentNode.removeChild(e);var o=l.length>=c;o&&console.warn("gl-react-dom: canvasPool of size "+c+" reached, you might want to increase pool size, use less concurrent WebGL Canvases or consider using gl-react-dom-static-container library"),r||o||l.indexOf(t)!==-1?t.cache.dispose():(l.push(t),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT))},i=-1,a=-1,h=-1;t={canvas:e,gl:n,dispose:o,resize:function(t,r,n){var o=n!==h;o&&(h=n),(t!==i||o)&&(i=t,e.width=n*t),(r!==a||o)&&(a=r,e.height=n*r)},cache:new s(n)}}();if("object"===(void 0===r?"undefined":a(r)))return r.v}return e.appendChild(t.canvas),t}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(48),u=r(6),f=r(13),c=20,l=[];e.exports={create:i,clear:o,setSize:n}},function(e,t,r){"use strict";e.exports=function(e,t){return e.getContext("webgl",t)||e.getContext("webgl-experimental",t)||e.getContext("experimental-webgl",t)}},function(e,t,r){"use strict";e.exports="\nattribute vec2 _p;\nvarying vec2 uv;\nvoid main() {\n  gl_Position = vec4(_p,0.0,1.0);\n  uv = vec2(0.5, 0.5) * (_p+vec2(1.0, 1.0));\n}\n"},function(e,t,r){"use strict";e.exports="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof HTMLCanvasElement.prototype.toBlob},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),u=s.Component,f=s.PropTypes,c=r(1),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){c(!1,"GL.Node elements can only be used as children of GL.Surface / GL.Node and should not be rendered")}}]),t}(u);l.isGLNode=!0,l.displayName="GL.Node",l.propTypes={shader:f.any.isRequired,uniforms:f.object,children:f.node,width:f.any,height:f.any,preload:f.bool},e.exports=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),u=s.Component,f=s.PropTypes,c=r(1),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){c(!1,"GL.Uniform elements are for GL.Node configuration only and should not be rendered")}}]),t}(u);l.isGLUniform=!0,l.displayName="GL.Uniform",l.propTypes={children:f.any.isRequired,name:f.string.isRequired},e.exports=l},function(e,t,r){"use strict";function n(e){return{type:"content",id:e}}function o(e){return{type:"ndarray",ndarray:e}}function i(e){return u({type:"uri"},e)}function a(e){return{type:"fbo",id:e}}function s(e,t){return u({},e,{opts:t})}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports={Content:n,NDArray:o,URI:i,Framebuffer:a,withOpts:s}},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(67),i=r(65);e.exports=function(e,t){for(var r=[],a=t,s=e;s&&"function"==typeof s.type;s=o(s,a,r))if(a=n({},a,i(s.props,["width","height","pixelRatio"])),s.type.isGLNode)return{childGLNode:s,via:r,context:a}}},function(e,t,r){"use strict";function n(e,t){o("number"==typeof e&&e>0&&!isNaN(e),"%s must be a strictly positive number. Got: '%s'",t,e)}var o=r(1);e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return e&&e.__getValue}},function(e,t,r){"use strict";function n(e){this.gl=e,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function o(e,t){return e.name<t.name?-1:1}function i(e,t,r,o,i){var a=new n(e);return a.update(t,r,o,i),a}var a=r(71),s=r(70),u=r(23),f=r(73),c=r(72),l=r(5),h=n.prototype;h.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},h.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(e,t,r,n){function i(){p.program=f.program(d,p._vref,p._fref,E,b);for(var e=0;e<r.length;++e)S[e]=d.getUniformLocation(p.program,r[e].name)}if(!t||1===arguments.length){var h=e;e=h.vertex,t=h.fragment,r=h.uniforms,n=h.attributes}var p=this,d=p.gl,_=p._vref;p._vref=f.shader(d,d.VERTEX_SHADER,e),_&&_.dispose(),p.vertShader=p._vref.shader;var g=this._fref;if(p._fref=f.shader(d,d.FRAGMENT_SHADER,t),g&&g.dispose(),p.fragShader=p._fref.shader,!r||!n){var v=d.createProgram();if(d.attachShader(v,p.fragShader),d.attachShader(v,p.vertShader),d.linkProgram(v),!d.getProgramParameter(v,d.LINK_STATUS)){var m=d.getProgramInfoLog(v);throw new l(m,"Error linking program:"+m)}r=r||c.uniforms(d,v),n=n||c.attributes(d,v),d.deleteProgram(v)}n=n.slice(),n.sort(o);for(var y=[],E=[],b=[],T=0;T<n.length;++T){var w=n[T];if(w.type.indexOf("mat")>=0){for(var A=0|w.type.charAt(w.type.length-1),R=new Array(A),x=0;x<A;++x)R[x]=b.length,E.push(w.name+"["+x+"]"),"number"==typeof w.location?b.push(w.location+x):Array.isArray(w.location)&&w.location.length===A&&"number"==typeof w.location[x]?b.push(0|w.location[x]):b.push(-1);y.push({name:w.name,type:w.type,locations:R})}else y.push({name:w.name,type:w.type,locations:[b.length]}),E.push(w.name),"number"==typeof w.location?b.push(0|w.location):b.push(-1)}for(var O=0,T=0;T<b.length;++T)if(b[T]<0){for(;b.indexOf(O)>=0;)O+=1;b[T]=O}var S=new Array(r.length);i(),p._relink=i,p.types={uniforms:u(r),attributes:u(n)},p.attributes=s(d,p,y,b),Object.defineProperty(p,"uniforms",a(d,p,r,S))},e.exports=i},function(e,t,r){"use strict";function n(e,t){for(var r={},n=0;n<e.length;++n)for(var o=e[n].name,i=o.split("."),a=r,s=0;s<i.length;++s){var u=i[s].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var f=1;f<u.length;++f){var c=parseInt(u[f]);f<u.length-1||s<i.length-1?(c in a||(f<u.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?n:e[n].type}}else s<i.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?n:e[n].type}return r}e.exports=n},function(e,t){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},function(e,t){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},function(e,t,r){(function(t){(function(){var r,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-o)/1e6},n=t.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},o=r()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,r(87))},function(e,t,r){"use strict";(function(e,n){function o(e){if(e){var t=e.length||e.byteLength,r=m.log2(t);T[r].push(e)}}function i(e){o(e.buffer)}function a(e){var e=m.nextPow2(e),t=m.log2(e),r=T[t];return r.length>0?r.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(a(e),0,e)}function u(e){return new Uint16Array(a(2*e),0,e)}function f(e){return new Uint32Array(a(4*e),0,e)}function c(e){return new Int8Array(a(e),0,e)}function l(e){return new Int16Array(a(2*e),0,e)}function h(e){return new Int32Array(a(4*e),0,e)}function p(e){return new Float32Array(a(4*e),0,e)}function d(e){return new Float64Array(a(8*e),0,e)}function _(e){return E?new Uint8ClampedArray(a(e),0,e):s(e)}function g(e){return new DataView(a(e),0,e)}function v(e){e=m.nextPow2(e);var t=m.log2(e),r=w[t];return r.length>0?r.pop():new n(e)}var m=r(35),y=r(40);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var E="undefined"!=typeof Uint8ClampedArray,b=e.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=y([32,0])),b.BUFFER||(b.BUFFER=y([32,0]));var T=b.DATA,w=b.BUFFER;t.free=function(e){if(n.isBuffer(e))w[m.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|m.log2(t);T[r].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeInt8=t.freeInt16=t.freeInt32=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=i,t.freeArrayBuffer=o,t.freeBuffer=function(e){w[m.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return a(e);switch(t){case"uint8":return s(e);case"uint16":return u(e);case"uint32":return f(e);case"int8":return c(e);case"int16":return l(e);case"int32":return h(e);case"float":case"float32":return p(e);case"double":case"float64":return d(e);case"uint8_clamped":return _(e);case"buffer":return v(e);case"data":case"dataview":return g(e);default:return null}return null},t.mallocArrayBuffer=a,t.mallocUint8=s,t.mallocUint16=u,t.mallocUint32=f,t.mallocInt8=c,t.mallocInt16=l,t.mallocInt32=h,t.mallocFloat32=t.mallocFloat=p,t.mallocFloat64=t.mallocDouble=d,t.mallocUint8Clamped=_,t.mallocDataView=g,t.mallocBuffer=v,t.clearCache=function(){for(var e=0;e<32;++e)b.UINT8[e].length=0,b.UINT16[e].length=0,b.UINT32[e].length=0,b.INT8[e].length=0,b.INT16[e].length=0,b.INT32[e].length=0,b.FLOAT[e].length=0,b.DOUBLE[e].length=0,b.UINT8C[e].length=0,T[e].length=0,w[e].length=0}}).call(t,r(2),r(36).Buffer)},function(e,t,r){"use strict";r(51);var n=r(50),o=r(12),i=r(15),a=r(52);e.exports={Surface:n,clearPool:o.clear,setPoolSize:o.setSize,toBlobSupported:i,isSupportedCapture:a}},function(e,t){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],n=0;n<e.length-1;n++)r.push(e[n],t[n]||"");return r.push(e[n]),r.join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(89),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default,e.exports=t.default},function(e,t,r){function n(e,t,r){t="number"==typeof t?t:1,r=r||": ";var n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map(function(e,n){var a=n+t,s=String(a).length;return o(a,i-s)+r+e}).join("\n")}var o=r(86);e.exports=n},function(e,t){e.exports=function(e){return atob(e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),f=n(u),c=r(10),l=n(c),h=r(9),p=n(h),d=r(30),_=n(d),g=r(29),v=(n(g),r(3)),m=r(28),y=m.Surface,E=v.Shaders.create({noise:{frag:"\nprecision mediump float;\n#define GLSLIFY 1\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_0 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_0;\n  vec3 i1 = min( g_0.xyz, l.zxy );\n  vec3 i2 = max( g_0.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvarying vec2 uv;\n\nuniform float tick;\nuniform sampler2D image;\nuniform sampler2D flameMask;\nuniform sampler2D lightingMask;\nuniform float onlyFlame;\nuniform float flameNoise1;\nuniform float flameNoise2;\nuniform float flameMaskFactor;\n\nfloat screen(float a, float b) {\n  return 1.0 - (1.0 - a) * (1.0 - b);\n}\n\nvec3 screen3(vec3 a, vec3 b) {\n  return vec3(screen(a.r, b.r), screen(a.g, b.g), screen(a.b, b.b));\n}\n\nvec3 result(vec3 c, float c_factor, float onlyFlame, vec4 flame, vec3 lighting) {\n  \n  vec3 lit = mix(c, lighting, c_factor) * (1.0 - onlyFlame);\n  return mix(lit, screen3(lit, flame.rgb), c_factor * flame.a);\n}\n\nfloat turbulence(float x) {\n  return 1.0 - abs(x);\n}\n\nvec4 flame(float n1, float n1_factor, float n2, float n2_factor, float mask, float mask_factor) {\n  vec3 yellow = vec3(237.0/255.0, 205.0/255.0, 137.0/255.0);\n  vec3 orange = vec3(209.0/255.0, 145.0/255.0, 64.0/255.0);\n\n  float noise = mix(1.0, n1, n1_factor) * mix(1.0, n2, n2_factor) * (n1_factor + n2_factor);\n  float masked_noise = mix(noise, noise * mask, mask_factor);\n\n  return vec4(mix(orange, yellow, masked_noise), masked_noise);\n}\n\nvec3 lighting(vec3 c, float n1, float n1_factor, float n2, float n2_factor, float mask) {\n  float noise = mix(1.0, n1, n1_factor) * mix(1.0, n2, n2_factor) * (n1_factor + n2_factor);\n  float masked_noise = noise * mask;\n  vec3 noised_image = vec3(screen(c.r, c.r * masked_noise), screen(c.g, c.g * masked_noise), screen(c.b, c.b * masked_noise));\n  return noised_image;\n}\n\nvoid main () {\n  vec4 c = texture2D(image, uv);\n  float fm = texture2D(flameMask, uv).r;\n  float m = texture2D(lightingMask, uv).r;\n\n  float n1 = snoise(vec3(uv.x * 4.0, uv.y * 4.0 - tick * 0.35, 1.0)) / 2.0 + 0.5;\n  float n2 = snoise(vec3(uv.x * 8.4, uv.y * 8.4 - tick * 0.56, 1.0)) / 2.0 + 0.5;\n  float n3 = snoise(vec3(uv.x * 27.0, uv.y * 27.0 - tick * 6.54, 1.0));\n  float n4 = snoise(vec3(uv.x * 21.0, uv.y * 21.0 - tick * 4.1, 1.0)) / 2.0 + 0.5;\n  n3 = turbulence(n3);\n  n4 = turbulence(n4);\n\n  vec4 f = flame(n3, flameNoise1, n4, flameNoise2, fm, flameMaskFactor);\n  vec3 l = lighting(c.rgb, n1, 1.0, n1, 1.0, m);\n\n  float pulse = 0.7 + sin(tick) * 0.1 + sin(tick * 7.0) * 0.1 + sin(tick * 5.0) * 0.1;\n  pulse = mix(pulse, 1.0, onlyFlame);\n\n  vec3 r = result(c.rgb, pulse, onlyFlame, f, l);\n\n  gl_FragColor = vec4(r, 1.0);\n}\n    "}}),b=v.createComponent(function(e){var t=e.tick,r=e.image,n=e.flameMask,o=e.lightingMask,i=e.onlyFlame,a=e.flameNoise1,s=e.flameNoise2,u=e.flameMaskFactor;return f.default.createElement(v.Node,{shader:E.noise,uniforms:{tick:t,image:r,flameMask:n,lightingMask:o,onlyFlame:i,flameNoise1:a,flameNoise2:s,flameMaskFactor:u}})},{displayName:"Noise"}),T=function(e){function t(){var e,r,n,a;o(this,t);for(var s=arguments.length,u=Array(s),f=0;f<s;f++)u[f]=arguments[f];return r=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.steps=[{name:"1 layer of noise",onlyFlame:1,flameNoise1:1,flameNoise2:0,flameMaskFactor:0},{name:"2 layers of noise",onlyFlame:1,flameNoise1:1,flameNoise2:1,flameMaskFactor:0},{name:"Masked flame",onlyFlame:1,flameNoise1:1,flameNoise2:1,flameMaskFactor:1},{name:"Full effect",onlyFlame:0,flameNoise1:1,flameNoise2:1,flameMaskFactor:1}],n.state={dimensions:{width:!1,height:!1},time:0,step:n.props.breakdown?0:n.steps.length-1},n.fps=1,n.frameDuration=1e3/n.fps,n.lastTime=0,a=r,i(n,a)}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=function t(r){var n=r-e.lastTime;e.lastTime=r;var o=n/e.frameDuration;e.raf=(0,p.default)(t),e.setState({time:e.state.time+o})};this.raf=(0,p.default)(t),this.props.breakdown&&(this.interval=setInterval(function(){e.setState({dimensions:e.state.dimensions,time:e.state.time,step:(e.state.step+1)%e.steps.length})},3e3))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf),this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this,t=this.state.dimensions.width,r=t/this.props.aspect,n=this.steps[this.state.step];return n.tick=this.state.time,n.image=window.location.origin+"/images/candlelight.jpg",n.flameMask=window.location.origin+"/images/candlelight-flame-mask.jpg",n.lightingMask=window.location.origin+"/images/candlelight-mask.jpg",f.default.createElement("div",{className:"animated-image"},f.default.createElement(_.default,{onMeasure:function(t){e.setState({dimensions:t})}},f.default.createElement("div",{className:"image-container"},f.default.createElement("div",{className:"aspect"},f.default.createElement("div",{className:"overlay",style:{width:t,height:r}},t>0?f.default.createElement(y,{width:t,height:r},f.default.createElement(b,n)):"",this.props.breakdown?f.default.createElement("span",{className:"breakdown-step-name"},n.name):"")))))}}]),t}(f.default.Component);l.default.render(f.default.createElement(T,{aspect:480/382}),document.getElementById("full-effect")),l.default.render(f.default.createElement(T,{aspect:480/382,breakdown:!0}),document.getElementById("effect-breakdown"))},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-n(e)}function i(e){var t,r,o,i,a,s,u=e.length;a=n(e),s=new l(3*u/4-a),o=a>0?u-4:u;var f=0;for(t=0,r=0;t<o;t+=4,r+=3)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[f++]=i>>16&255,s[f++]=i>>8&255,s[f++]=255&i;return 2===a?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[f++]=255&i):1===a&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[f++]=i>>8&255,s[f++]=255&i),s}function a(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function s(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(a(n));return o.join("")}function u(e){for(var t,r=e.length,n=r%3,o="",i=[],a=0,u=r-n;a<u;a+=16383)i.push(s(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],o+=f[t>>2],o+=f[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=f[t>>10],o+=f[t>>4&63],o+=f[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=o,t.toByteArray=i,t.fromByteArray=u;for(var f=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)f[p]=h[p],c[h.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,r){"use strict";"use restrict";function n(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var o=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,o=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--o;e[t]=n<<o&255}}(o),t.reverse=function(e){return o[255&e]<<24|o[e>>>8&255]<<16|o[e>>>16&255]<<8|o[e>>>24&255]},t.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},t.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},t.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},function(e,t,r){"use strict";(function(e){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?c(e,t,r):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function f(e,t){if(s(t),e=o(e,t<0?0:0|d(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,r);e=o(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function l(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=l(e,t),e}function p(e,t){if(i.isBuffer(t)){var r=0|d(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?o(e,0):l(e,t);if("Buffer"===t.type&&$(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),i.alloc(+e)}function g(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return H(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}var f;if(o){var c=-1;for(f=r;f<s;f++)if(i(e,f)===i(t,c===-1?0:f-c)){if(c===-1&&(c=f),f-c+1===u)return c*a}else c!==-1&&(f-=f-c),c=-1}else for(r+u>s&&(r=s-u),f=r;f>=0;f--){for(var l=!0,h=0;h<u;h++)if(i(e,f+h)!==i(t,h)){l=!1;break}if(l)return f}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function T(e,t,r,n){return W(H(t,e.length-r),e,r,n)}function w(e,t,r,n){return W(Y(t),e,r,n)}function A(e,t,r,n){return w(e,t,r,n)}function R(e,t,r,n){return W(q(t),e,r,n)}function x(e,t,r,n){return W(z(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){var u,f,c,l;switch(s){case 1:i<128&&(a=i);break;case 2:u=e[o+1],128==(192&u)&&(l=(31&i)<<6|63&u)>127&&(a=l);break;case 3:u=e[o+1],f=e[o+2],128==(192&u)&&128==(192&f)&&(l=(15&i)<<12|(63&u)<<6|63&f)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=e[o+1],f=e[o+2],c=e[o+3],128==(192&u)&&128==(192&f)&&128==(192&c)&&(l=(15&i)<<18|(63&u)<<12|(63&f)<<6|63&c)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return N(n)}function N(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=J));return r}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=X(e[i]);return o}function M(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,r,n,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function F(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function j(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,o){return o||j(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,o){return o||j(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,r,n,52,8),r+8}function V(e){if(e=G(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function G(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Y(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function z(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function q(e){return Z.toByteArray(V(e))}function W(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function K(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Z=r(34),Q=r(80),$=r(83);t.Buffer=i,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,r){return a(null,e,t,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,r){return u(null,e,t,r)},i.allocUnsafe=function(e){return f(null,e)},i.allocUnsafeSlow=function(e){return f(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},i.byteLength=g,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=r-t,u=Math.min(a,s),f=this.slice(n,o),c=e.slice(t,r),l=0;l<u;++l)if(f[l]!==c[l]){a=f[l],s=c[l];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},i.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return A(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=i.prototype;else{var o=t-e;n=new i(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},i.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){U(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){U(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);U(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);U(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=i.isBuffer(e)?e:H(new i(e,n).toString()),u=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(2))},function(e,t,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function o(e){var t=new n;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var o=0;o<r.length;++o){var a=r[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[o]="array",t.arrayArgs.push(o),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,i(t)}var i=r(39);e.exports=o},function(e,t,r){"use strict";function n(e,t,r){var n,o,i=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],f=[],c=0,l=0;for(n=0;n<i;++n)f.push(["i",n,"=0"].join(""));for(o=0;o<a;++o)for(n=0;n<i;++n)l=c,c=e[n],0===n?f.push(["d",o,"s",n,"=t",o,"p",c].join("")):f.push(["d",o,"s",n,"=(t",o,"p",c,"-s",l,"*t",o,"p",l,")"].join(""));for(u.push("var "+f.join(",")),n=i-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<i;++n){for(l=c,c=e[n],o=0;o<a;++o)u.push(["p",o,"+=d",o,"s",n].join(""));s&&(n>0&&u.push(["index[",l,"]-=s",l].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function o(e,t,r,o){for(var i=t.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,f=[],c=0;c<a;++c)f.push(["var offset",c,"=p",c].join(""));for(var c=e;c<i;++c)f.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),f.push(["if(j",c,"<",s,"){"].join("")),f.push(["s",t[c],"=j",c].join("")),f.push(["j",c,"=0"].join("")),f.push(["}else{s",t[c],"=",s].join("")),f.push(["j",c,"-=",s,"}"].join("")),u&&f.push(["index[",t[c],"]=j",c].join(""));for(var c=0;c<a;++c){for(var l=["offset"+c],h=e;h<i;++h)l.push(["j",h,"*t",c,"p",t[h]].join(""));f.push(["p",c,"=(",l.join("+"),")"].join(""))}f.push(n(t,r,o));for(var c=e;c<i;++c)f.push("}");return f.join("\n")}function i(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function a(e,t,r){for(var n=e.body,o=[],i=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),f="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var l=t.offsetArgIndex.indexOf(a);c=t.offsetArgs[l].array,f="+q"+l;case"array":f="p"+c+f;var h="l"+a,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(o.push(["var ",h,"=",p,".get(",f,")"].join("")),n=n.replace(u,h),i.push([p,".set(",f,",",h,")"].join(""))):n=n.replace(u,[p,".get(",f,")"].join("")):n=n.replace(u,[p,"[",f,"]"].join("")):"generic"===r[c]?(o.push(["var ",h,"=",p,".get(",f,")"].join("")),n=n.replace(u,h),s.lvalue&&i.push([p,".set(",f,",",h,")"].join(""))):(o.push(["var ",h,"=",p,"[",f,"]"].join("")),n=n.replace(u,h),s.lvalue&&i.push([p,"[",f,"]=",h].join("")));else{for(var d=[s.name],_=[f],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)d.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(g+1)+"*t"+c+"b"+g);if(u=new RegExp(d.join(""),"g"),f=_.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",f,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[o.join("\n"),n,i.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var o=e[n],i=o.match(/\d+/);i=i?i[0]:"",0===o.charAt(0)?t[n]="u"+o.charAt(1)+i:t[n]=o.charAt(0)+i,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function u(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,u=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)c[l]=t[2*l],u[l]=t[2*l+1];for(var h=[],p=[],d=[],_=[],g=[],l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(d.push(0),_.push(r),h.push(r),p.push(r+e.arrayBlockIndices[l])):(d.push(e.arrayBlockIndices[l]),_.push(e.arrayBlockIndices[l]+r),h.push(0),p.push(e.arrayBlockIndices[l]));for(var v=[],m=0;m<u[l].length;m++)d[l]<=u[l][m]&&u[l][m]<_[l]&&v.push(u[l][m]-d[l]);g.push(v)}for(var y=["SS"],E=["'use strict'"],b=[],m=0;m<r;++m)b.push(["s",m,"=SS[",m,"]"].join(""));for(var l=0;l<e.arrayArgs.length;++l){y.push("a"+l),y.push("t"+l),y.push("p"+l);for(var m=0;m<r;++m)b.push(["t",l,"p",m,"=t",l,"[",d[l]+m,"]"].join(""));for(var m=0;m<Math.abs(e.arrayBlockIndices[l]);++m)b.push(["t",l,"b",m,"=t",l,"[",h[l]+m,"]"].join(""))}for(var l=0;l<e.scalarArgs.length;++l)y.push("Y"+l);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var T=new Array(r),l=0;l<r;++l)T[l]="0";b.push(["index=[",T.join(","),"]"].join(""))}for(var l=0;l<e.offsetArgs.length;++l){for(var w=e.offsetArgs[l],A=[],m=0;m<w.offset.length;++m)0!==w.offset[m]&&(1===w.offset[m]?A.push(["t",w.array,"p",m].join("")):A.push([w.offset[m],"*t",w.array,"p",m].join("")));0===A.length?b.push("q"+l+"=0"):b.push(["q",l,"=",A.join("+")].join(""))}var R=f([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));b=b.concat(R),E.push("var "+b.join(","));for(var l=0;l<e.arrayArgs.length;++l)E.push("p"+l+"|=0");e.pre.body.length>3&&E.push(a(e.pre,e,c));var x=a(e.body,e,c),O=i(g);O<r?E.push(o(O,g[0],e,x)):E.push(n(g[0],e,x)),e.post.body.length>3&&E.push(a(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+E.join("\n")+"\n----------");var S=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",O,s(c)].join("");return new Function(["function ",S,"(",y.join(","),"){",E.join("\n"),"} return ",S].join(""))()}var f=r(93);e.exports=u},function(e,t,r){"use strict";function n(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],f=[],c=0;c<e.arrayArgs.length;++c){var l=e.arrayArgs[c];r.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),i.push("t"+l),i.push("r"+l),a.push("t"+l),a.push("r"+l+".join()"),s.push("array"+l+".data"),s.push("array"+l+".stride"),s.push("array"+l+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),f.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(o.bind(void 0,e))}var o=r(38);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){var o=0|e[r];if(o<=0)return[];var i,a=new Array(o);if(r===e.length-1)for(i=0;i<o;++i)a[i]=t;else for(i=0;i<o;++i)a[i]=n(e,t,r+1);return a}function o(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function i(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return o(0|e,t);break;case"object":if("number"==typeof e.length)return n(e,t,0)}return[]}e.exports=i},function(e,t,r){"use strict";function n(e,t){var r=e.parentNode,n=document.createElement("div"),o=e.cloneNode(!0),a=getComputedStyle(e),s=void 0,u=void 0,f=void 0;return n.style.height=0,n.style.overflow="hidden",o.setAttribute("id",""),o.setAttribute("name",""),(t.display||"none"===a.getPropertyValue("display"))&&(o.style.display=t.display||"block"),!t.width&&parseInt(a.getPropertyValue("width"))||(o.style.width=t.width||"auto"),!t.height&&parseInt(a.getPropertyValue("height"))||(o.style.height=t.height||"auto"),n.appendChild(o),r.appendChild(n),s=o.getBoundingClientRect(),u=o.offsetWidth,f=o.offsetHeight,r.removeChild(n),{rect:{width:u,height:f,top:s.top,right:s.right,bottom:s.bottom,left:s.left},margin:(0,i.default)(a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=r(11),i=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e.getBoundingClientRect(),n=void 0,o=void 0,i=void 0;if(r.width&&r.height&&!t.clone)t.margin&&(i=(0,u.default)(getComputedStyle(e)));else{var s=(0,a.default)(e,t);r=s.rect,i=s.margin}return t.margin?(n=i.left+r.width+i.right,o=i.top+r.height+i.bottom):(n=r.width,o=r.height),{width:n,height:o,top:r.top,right:r.right,bottom:r.bottom,left:r.left}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(41),a=n(i),s=r(11),u=n(s);e.exports=t.default},function(e,t){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(e,t,r){var n=r(43);e.exports=function(e){return n[e]}},function(e,t,r){"use strict";function n(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function o(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function i(e,t){var r=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);m=new Array(r+1);for(var n=0;n<=r;++n){for(var o=new Array(r),i=0;i<n;++i)o[i]=e.COLOR_ATTACHMENT0+i;for(var i=n;i<r;++i)o[i]=e.NONE;m[n]=o}}function a(e){switch(e){case d:throw new Error("gl-fbo: Framebuffer unsupported");case _:throw new Error("gl-fbo: Framebuffer incomplete attachment");case g:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case v:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function s(e,t,r,n,o,i){if(!n)return null;var a=p(e,t,r,o,n);return a.magFilter=e.NEAREST,a.minFilter=e.NEAREST,a.mipSamples=1,a.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,i,e.TEXTURE_2D,a.handle,0),a}function u(e,t,r,n,o){var i=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,n,t,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,o,e.RENDERBUFFER,i),i}function f(e){var t=n(e.gl),r=e.gl,i=e.handle=r.createFramebuffer(),f=e._shape[0],c=e._shape[1],l=e.color.length,h=e._ext,p=e._useStencil,d=e._useDepth,_=e._colorType;r.bindFramebuffer(r.FRAMEBUFFER,i);for(var g=0;g<l;++g)e.color[g]=s(r,f,c,_,r.RGBA,r.COLOR_ATTACHMENT0+g);0===l?(e._color_rb=u(r,f,c,r.RGBA4,r.COLOR_ATTACHMENT0),h&&h.drawBuffersWEBGL(m[0])):l>1&&h.drawBuffersWEBGL(m[l]);var v=r.getExtension("WEBGL_depth_texture");v?p?e.depth=s(r,f,c,v.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):d&&(e.depth=s(r,f,c,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):d&&p?e._depth_rb=u(r,f,c,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):d?e._depth_rb=u(r,f,c,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):p&&(e._depth_rb=u(r,f,c,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var y=r.checkFramebufferStatus(r.FRAMEBUFFER);if(y!==r.FRAMEBUFFER_COMPLETE){e._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(r.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(var g=0;g<e.color.length;++g)e.color[g].dispose(),e.color[g]=null;e._color_rb&&(r.deleteRenderbuffer(e._color_rb),e._color_rb=null),o(r,t),a(y)}o(r,t)}function c(e,t,r,n,o,i,a,s){this.gl=e,this._shape=[0|t,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(o);for(var u=0;u<o;++u)this.color[u]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=i,this._useStencil=a;var c=this,l=[0|t,0|r];Object.defineProperties(l,{0:{get:function(){return c._shape[0]},set:function(e){return c.width=e}},1:{get:function(){return c._shape[1]},set:function(e){return c.height=e}}}),this._shapeVector=l,f(this)}function l(e,t,r){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==r){var i=e.gl,s=i.getParameter(i.MAX_RENDERBUFFER_SIZE);if(t<0||t>s||r<0||r>s)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=r;for(var u=n(i),f=0;f<e.color.length;++f)e.color[f].shape=e._shape;e._color_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,e._color_rb),i.renderbufferStorage(i.RENDERBUFFER,i.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&i.renderbufferStorage(i.RENDERBUFFER,i.STENCIL_INDEX,e._shape[0],e._shape[1])),i.bindFramebuffer(i.FRAMEBUFFER,e.handle);var c=i.checkFramebufferStatus(i.FRAMEBUFFER);c!==i.FRAMEBUFFER_COMPLETE&&(e.dispose(),o(i,u),a(c)),o(i,u)}}function h(e,t,r,n){d||(d=e.FRAMEBUFFER_UNSUPPORTED,_=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,g=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,v=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var o=e.getExtension("WEBGL_draw_buffers");if(!m&&o&&i(e,o),Array.isArray(t)&&(n=r,r=0|t[1],t=0|t[0]),"number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var a=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>a||r<0||r>a)throw new Error("gl-fbo: Parameters are too large for FBO");n=n||{};var s=1;if("color"in n){if((s=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(s>1){if(!o)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(s>e.getParameter(o.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+s+" draw buffers")}}var u=e.UNSIGNED_BYTE,f=e.getExtension("OES_texture_float");if(n.float&&s>0){if(!f)throw new Error("gl-fbo: Context does not support floating point textures");u=e.FLOAT}else n.preferFloat&&s>0&&f&&(u=e.FLOAT);var l=!0;"depth"in n&&(l=!!n.depth);var h=!1;return"stencil"in n&&(h=!!n.stencil),new c(e,t,r,u,s,l,h,o)}var p=r(8);e.exports=h;var d,_,g,v,m=null,y=c.prototype;Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],r=0|e[1];return l(this,t,r),[t,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return e|=0,l(this,e,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,l(this,this._shape[0],e),e},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},function(e,t,r){function n(e,t,r){"use strict";var n=a(t)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==r&&(u=r===i.FRAGMENT_SHADER?"fragment":"vertex");for(var f=o("Error compiling %s shader %s:\n",u,n),c=o("%s%s",f,e),l=e.split("\n"),h={},p=0;p<l.length;p++){var d=l[p];if(""!==d){var _=parseInt(d.split(":")[2]);if(isNaN(_))throw new Error(o("Could not parse error: %s",d));h[_]=d}}for(var g=s(t).split("\n"),p=0;p<g.length;p++)if(h[p+3]||h[p+2]||h[p+1]){var v=g[p];if(f+=v+"\n",h[p+1]){var m=h[p+1];m=m.substr(m.split(":",3).join(":").length+1).trim(),f+=o("^^^ %s\n\n",m)}}return{long:f.trim(),short:c.trim()}}var o=r(92).sprintf,i=r(44),a=r(74),s=r(31);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,r){for(var n in t)n in e||r(t[n],n)}function f(e,t){e.shape[0]===t[0]&&e.shape[1]===t[1]||(e.shape=t)}function c(e){return e.uri}function l(e,t){for(var r=0,n=0;n<t.length;n++)e.indexOf(c(t[n]))!==-1&&r++;return r}function h(e){return{types:{uniforms:e.types.uniforms}}}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g=r(53),v=r(88),m=r(0),y=m.Component,E=m.PropTypes,b=r(9),T=r(26),w=r(22),A=r(8),R=r(45),x=r(27),O=r(3),S=O.Shaders,N=r(49),I=r(14),C=r(6),P=r(12),M=function(e){return e.dispose()},L=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._onContextLost=function(e){e.preventDefault(),r._gl=null;var t=r.props.onContextLost;t&&t()},r._onContextRestored=function(){r._poolObject&&r._poolObject.dispose(),r._mountPoint=null,r.forceUpdate();var e=r.props.onContextRestored;e&&e()},r._getFBO=function(e){var t=r._cache._fbos;if(g(e>=0,"fbo id must be a positive integer"),e in t)return t[e];var n=R(r._gl,[2,2]);return n.color[0].minFilter=n.color[0].magFilter=r._gl.LINEAR,t[e]=n,n},r._onImageLoad=function(e){r._preloading.push(e);var t=r.props,n=t.imagesToPreload,o=t.onProgress,i=l(r._preloading,n),a=n.length;o&&o({progress:i/a,loaded:i,total:a}),r._dirtyOnLoad=!0,r._requestSyncData()},r._handleDraw=function(){if(delete r._rafDraw,r._needsSyncData)try{r._syncData(r._data)}catch(e){if(!("rawError"in e))throw e}r._haveRemainingToPreload()||r._draw()},r._data=e.data,r}return s(t,e),_(t,[{key:"_mount",value:function(e){if(this._drawCleanups=[],this._poolObject=P.create(e),this._poolObject){this._cache=this._poolObject.cache;var t=this._poolObject,r=t.canvas,n=t.gl,o=t.resize,i=this.props.data;i&&o(i.width,i.height,i.pixelRatio),this._canvas=r,this._dirtyOnLoad=!0,this._preloading=Object.keys(this._cache._images),this._autoredraw=this.props.autoRedraw,this._pendingCaptureFrame={},this._gl=n,r.addEventListener("webglcontextlost",this._onContextLost),r.addEventListener("webglcontextrestored",this._onContextRestored),this._resizeUniformContentTextures(this.props.nbContentTextures),this._requestSyncData(),this._syncAutoRedraw()}}},{key:"componentWillUnmount",value:function(){var e=this;if(this._drawCleanups.forEach(function(e){return e()}),this._drawCleanups=null,this._poolObject){var t=this._poolObject.canvas;t.removeEventListener("webglcontextlost",this._onContextLost),t.removeEventListener("webglcontextrestored",this._onContextRestored),this._poolObject.dispose()}this._allocatedFromPool&&this._allocatedFromPool.forEach(x.freeUint8),this.setDebugProbe(null),this._mountPoint=null,this._canvas=null,this._gl=null,this._cache=null,this._rafAutoRedraw&&b.cancel(this._rafAutoRedraw),this._rafDraw&&b.cancel(this._rafDraw),Object.keys(this._pendingCaptureFrame).forEach(function(t){e._pendingCaptureFrame[t].reject(new Error("GLCanvas is unmounting"))}),this._pendingCaptureFrame=null}},{key:"componentWillReceiveProps",value:function(e){e.nbContentTextures!==this.props.nbContentTextures&&this._resizeUniformContentTextures(e.nbContentTextures),e.data!==this.props.data&&(this._data=e.data,this._requestSyncData()),this._autoredraw=e.autoRedraw,this._syncAutoRedraw()}},{key:"componentWillUpdate",value:function(){if(this._poolObject){var e=this.props.data;e&&this._poolObject.resize(e.width,e.height,e.pixelRatio)}}},{key:"render",value:function(){var e,t=this,r=this.props,i=r.width,a=r.height,s=(r.pixelRatio,r.style),u=(r.data,r.nbContentTextures,r.imagesToPreload,r.renderId,r.onLoad,r.onProgress,r.autoRedraw,r.eventsThrough),f=(r.visibleContent,o(r,["width","height","pixelRatio","style","data","nbContentTextures","imagesToPreload","renderId","onLoad","onProgress","autoRedraw","eventsThrough","visibleContent"])),c=d({},s,(e={width:i+"px",height:a+"px"},n(e,C,u?"none":"auto"),n(e,"position","relative"),n(e,"display","inline-block"),e));return m.createElement("div",d({},f,{ref:function(e){e&&!t._mountPoint&&t._mount(t._mountPoint=e)},style:c}))}},{key:"captureFrame",value:function(e){var t=void 0;if(e){g("object"===(void 0===e?"undefined":p(e)),"captureFrame takes an object option in parameter");var r=0;"format"in e&&(g("string"==typeof e.format,"captureFrame({format}): format must be a string (e.g: 'base64', 'blob'), Got: '%s'",e.format),r++),"type"in e&&(g("string"==typeof e.type,"captureFrame({type}): type must be a string (e.g: 'png', 'jpg'), Got: '%s'",e.type),r++),"quality"in e&&(g("number"==typeof e.quality&&e.quality>=0&&e.quality<=1,"captureFrame({quality}): quality must be a number between 0 and 1, Got: '%s'",e.quality),r++);var n=Object.keys(e);g(n.length===r,"captureFrame(opts): opts must be an object with {format, type, quality}, found some invalid keys in '%s'",n),t=e}t=d({format:"base64",type:"png",quality:1},t);var o=this._addPendingCaptureFrame(t).promise;return this._requestDraw(),o}},{key:"setDebugProbe",value:function(e){this._debugProbe&&(this._debugProbe=null),e&&(g("function"==typeof e.onDraw,"onDraw is required in setDebugProbe({ onDraw })"),e=d({profile:!0,capture:!0,captureRate:0},e),this._debugProbe=d({},e,{lastCapture:0}),this._requestDraw())}},{key:"setNativeProps",value:function(e){"data"in e&&e.data!==this._data&&(this._data=e.data,this._requestSyncData())}},{key:"requestDraw",value:function(){this._requestDraw()}},{key:"_addPendingCaptureFrame",value:function(e){var t=e.format+":"+e.type+":"+e.quality;return this._pendingCaptureFrame[t]||(this._pendingCaptureFrame[t]=d({},v(),{opts:e}))}},{key:"_capture",value:function(e){var t=e.format,r=e.type,n=e.quality,o=this._canvas;try{switch(t){case"base64":return Promise.resolve(o.toDataURL(r,n));case"blob":return new Promise(function(e){return o.toBlob(e,r,n)});default:g(!1,"invalid capture format '%s'",t)}}catch(e){return Promise.reject(e)}}},{key:"_syncData",value:function(e){function t(e){var r=e.shader,u=e.uniforms,c=e.children,d=e.contextChildren,_=e.width,v=e.height,m=e.pixelRatio,y=e.fboId,E=d.map(t),b=c.map(t),T=void 0;if(r in l)T=l[r];else if(r in s)T=l[r]=s[r];else{var R=S.get(r);g(R,"Shader #%s does not exists",r),T=w(n,I,R.frag),T.name=R.name,T.attributes._p.pointer(),l[r]=T}var x={},O={},C=0;for(var P in u){var M=u[P],L=T.types.uniforms[P];if(g(L,"Shader '%s': Uniform '%s' is not defined/used",T.name,P),"sampler2D"===L||"samplerCube"===L)if(x[P]=C++,M)switch(M.type){case"content":O[P]=i[M.id];break;case"fbo":var U=a(M.id);O[P]=U.color[0];break;case"uri":var F=M.uri;g(F&&"string"==typeof F,"Shader '%s': An image src is defined for uniform '%s'",T.name,P);var D=void 0;F in h?D=h[F]:F in f?D=h[F]=f[F]:(D=new N(n,o),h[F]=D),D.src=F,O[P]=D.getTexture();break;case"ndarray":var j=A(n,M.ndarray),B=M.opts||{};B.disableLinearInterpolation||(j.minFilter=j.magFilter=n.LINEAR),O[P]=j,p.push(j);break;default:g(!1,"Shader '%s': invalid uniform '%s' value of type '%s'",T.name,P,M.type)}else{var k=A(n,[2,2]);O[P]=k,p.push(k)}else x[P]=M}var V=Object.keys(T.uniforms).filter(function(e){return!(e in x)});return g(0===V.length,"Shader '%s': All defined uniforms must be provided. Missing: '"+V.join("', '")+"'",T.name),{shader:T,uniforms:x,textures:O,children:b,contextChildren:E,width:_,height:v,pixelRatio:m,fboId:y,data:e}}var r=this,n=this._gl;if(n){var o=this._onImageLoad,i=this._cache._contentTextures,a=this._getFBO,s=this._cache._shaders,f=this._cache._images,c=this._cache._standaloneTextures,l={},h={},p=[];this._renderData=t(e),u(h,f,function(e,t){var n=r._preloading.indexOf(t);n!==-1&&r._preloading.splice(n,1)}),this._dispatchDrawCleanup(function(){u(l,s,M),u(h,f,M),c.forEach(M)}),this._cache._shaders=l,this._cache._images=h,this._cache._standaloneTextures=p,this._needsSyncData=!1}}},{key:"_dispatchDrawCleanup",value:function(e){this._drawCleanups.push(e)}},{key:"_draw",value:function(){function e(t){var n=t.shader,l=t.uniforms,_=t.textures,g=t.children,m=t.contextChildren,y=t.width,E=t.height,b=t.pixelRatio,w=t.fboId,A=t.data,R=s?d({},A,{shaderInfos:h(n)}):{},O=void 0,S=y*b,N=E*b;R.contextChildren=m.map(e),R.children=g.map(e),c&&(O=T());var I=void 0;w===-1?(r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,S,N),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA)):(I=o(w),f(I,[S,N]),I.bind(),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA)),n.bind(),r.bindBuffer(r.ARRAY_BUFFER,i);for(var C in _)_[C].bind(l[C]);for(var P in l)n.uniforms[P]=l[P];if(r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLES,0,3),c){O=T()-O;var M=0;R.contextChildren.forEach(function(e){var t=e.profileInclusive;M+=t}),R.children.forEach(function(e){var t=e.profileInclusive;M+=t}),Object.keys(A.uniforms).forEach(function(e){var t=A.uniforms[e];"object"===(void 0===t?"undefined":p(t))&&"content"===t.type&&(M+=v[t.id].profileExclusive)}),R.profileExclusive=O,R.profileInclusive=M+O}if(u){var L=x.mallocUint8(S*N*4);a.push(L),r.readPixels(0,0,S,N,r.RGBA,r.UNSIGNED_BYTE,L),R.capture={pixels:L,width:S,height:N}}return R}var t=this;this._needsDraw=!1;var r=this._gl,n=this._renderData;if(r&&n){var o=this._getFBO,i=this._cache._buffer,a=[],s=this._debugProbe,u=!1,c=!1;if(s){if(s.capture){var l=T();l-s.lastCapture>s.captureRate&&(s.lastCapture=l,u=!0)}c=s.profile}var _=this._getDrawingUniforms(),g=this._cache._contentTextures,v=_.map(function(e,r){var n=void 0;if(c&&(n=T()),t._syncUniformTexture(g[r],e),c&&(n=T()-n),s){var o=void 0;return u&&(o=e),{code:e.parentNode.innerHTML,capture:o,profileExclusive:n,profileInclusive:n}}});r.enable(r.BLEND);var m=e(n);r.disable(r.BLEND),this._drawCleanups.length>0&&(this._drawCleanups.forEach(function(e){return e()}),this._drawCleanups=[]),s&&(this._allocatedFromPool&&this._allocatedFromPool.forEach(x.freeUint8),this._allocatedFromPool=a,s.onDraw({tree:m,contents:v,Shaders:S}));var y=this._pendingCaptureFrame,E=Object.keys(y);E.length>0&&(E.forEach(function(e){var r=y[e],n=r.opts,o=r.resolve,i=r.reject;t._capture(n).then(o,i)}),this._pendingCaptureFrame={}),this._dirtyOnLoad&&!this._haveRemainingToPreload()&&(this._dirtyOnLoad=!1,this.props.onLoad&&this.props.onLoad())}}},{key:"_haveRemainingToPreload",value:function(){var e=this;return this.props.imagesToPreload.some(function(t){return e._preloading.indexOf(c(t))===-1})}},{key:"_resizeUniformContentTextures",value:function(e){var t=this._gl,r=this._cache._contentTextures,n=r.length;if(n!==e)if(e<n){for(var o=e;o<n;o++)r[o].dispose();r.length=e}else for(var i=r.length;i<e;i++){var a=A(t,[2,2]);a.minFilter=a.magFilter=t.LINEAR,r.push(a)}}},{key:"_getDrawingUniforms",value:function(){var e=this.props.nbContentTextures;if(0===e)return[];for(var t=this._mountPoint.parentNode.children,r=[],n=0;n<e;n++)r[n]=t[n].firstChild;return r}},{key:"_syncAutoRedraw",value:function(){var e=this;if(this._autoredraw&&!this._rafAutoRedraw){var t=function t(){if(!e._autoredraw)return void delete e._rafAutoRedraw;e._rafAutoRedraw=b(t),e._draw()};this._rafAutoRedraw=b(t)}}},{key:"_syncUniformTexture",value:function(e,t){var r=t.width||t.videoWidth,n=t.height||t.videoHeight;r&&n?(f(e,[r,n]),e.setPixels(t)):e.shape=[2,2]}},{key:"_requestSyncData",value:function(){this._needsSyncData=!0,this._requestDraw()}},{key:"_requestDraw",value:function(){this._rafDraw||(this._rafDraw=b(this._handleDraw))}}]),t}(y);L.propTypes={width:E.number.isRequired,height:E.number.isRequired,pixelRatio:E.number.isRequired,data:E.object.isRequired,nbContentTextures:E.number.isRequired},e.exports=L},function(e,t,r){"use strict";function n(e){this.gl=e,this._images={},this._shaders={},this._fbos={},this._contentTextures=[],this._standaloneTextures=[],e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0);var t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,4,4,-1]),e.STATIC_DRAW),this._buffer=t}n.prototype={dispose:function(){this._contentTextures.forEach(function(e){return e.dispose()}),this._standaloneTextures.forEach(function(e){return e.dispose()}),[this._shaders,this._images,this._fbos].forEach(function(e){for(var t in e)e[t].dispose(),delete e[t]}),this.gl&&this.gl.deleteBuffer(this._buffer),this.gl=null}},e.exports=n},function(e,t,r){"use strict";function n(e,t,r){var n=new window.Image;return"data:"!==e.slice(0,5)&&(n.crossOrigin=!0),n.onload=function(){t(n)},n.onabort=n.onerror=r,n.src=e,function(){n.onload=null,n.onerror=null,n.onabort=null,n.src="",n=null}}function o(e,t){this.gl=e,this.image=null,this._onload=t,this.texture=i(e,[2,2]),this.texture.minFilter=this.texture.magFilter=e.LINEAR,this._textureImg=null}var i=r(8);o.prototype={dispose:function(){this._loading&&this._loading(),this.texture.dispose(),this.texture=null},reloadImage:function(){var e=this,t=this._src;this._loading&&this._loading(),this._loading=null,t?this._loading=n(t,function(r){e.clearImage(),e._loading=null,e.image=r,e._onload&&e._onload(t)},function(){e._loading=null,e.clearImage()}):this.clearImage()},getTexture:function(){var e=this.image,t=this.texture;return e!==this._textureImg&&(this._textureImg=e,e?(t.shape=[e.width,e.height],t.setPixels(e)):t.shape=[2,2]),t},clearImage:function(){this.image=null}},Object.defineProperty(o.prototype,"src",{set:function(e){e!==this._src&&(this._src=e,this.reloadImage())},get:function(){return this._src}}),e.exports=o},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r,n,o){var i=o.visibleContent,a=u.Children.only(n),s={position:"absolute",top:0,left:0,width:e+"px",height:t+"px",visibility:i?"visible":"hidden"};return u.createElement("div",{key:"content-"+r,style:s},a)}function i(e){return u.createElement(f,s({ref:"canvas"},e))}function a(e,t,r){var o=e.style,i=e.visibleContent,a=e.eventsThrough,f=e.width,c=e.height,l=s({position:"relative"},o,n({width:f+"px",height:c+"px",overflow:"hidden"},h,!i&&a?"none":"auto"));return u.createElement("div",{style:l},t,r)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=r(0),f=r(47),c=r(3),l=c.createSurface,h=r(6),p=function(e){return e.scale||window.devicePixelRatio||1};e.exports=l(a,o,i,p)},function(e,t,r){"use strict";var n=r(3),o=n.Shaders,i=r(22),a=r(13),s=r(14),u=document.createElement("canvas"),f=a(u,{}),c=function(e){if(!f)throw new Error("WebGL context unavailable");var t=i(f,s,e.frag),r=t.types.uniforms;return t.dispose(),{uniforms:r}};o.setImplementation({add:function(e,t){return Promise.resolve().then(function(){try{return c(t)}catch(e){throw e.rawError||e.message}})},remove:function(){}})},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(15);e.exports=function(e){switch(e=n({format:"base64",type:"png",quality:1},e),e.format){case"base64":return!0;case"blob":return o;default:return!1}}},function(e,t,r){"use strict";var n=function(e,t,r,n,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,n,o,i,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return f[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=n},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(21),c=function(){function e(){a(this,e)}return u(e,[{key:"__attach",value:function(){}},{key:"__detach",value:function(){}},{key:"__getValue",value:function(){}},{key:"__getAnimatedValue",value:function(){return this.__getValue()}},{key:"__addChild",value:function(){}},{key:"__removeChild",value:function(){}},{key:"__getChildren",value:function(){return[]}}]),e}(),l=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._children=[],e}return i(t,e),u(t,[{key:"__addChild",value:function(e){0===this._children.length&&this.__attach(),this._children.push(e)}},{key:"__removeChild",value:function(e){var t=this._children.indexOf(e);if(t===-1)return void console.warn("Trying to remove a child that doesn't exist");this._children.splice(t,1),0===this._children.length&&this.__detach()}},{key:"__getChildren",value:function(){return this._children}}]),t}(c),h=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._uniforms=e,r.__attach(),r}return i(t,e),u(t,[{key:"__getValue",value:function(){var e={},t=this._uniforms;for(var r in t){var n=t[r];if(n instanceof Array){for(var o=[],i=0;i<n.length;i++){var a=n[i];o[i]=f(a)?a.__getValue():a}e[r]=o}else f(n)?e[r]=n.__getValue():e[r]=n}return e}},{key:"__attach",value:function(){var e=this._uniforms;for(var t in e){var r=e[t];if(r instanceof Array)for(var n=0;n<r.length;n++){var o=r[n];f(o)&&o.__addChild(this)}else f(r)&&r.__addChild(this)}}},{key:"__detach",value:function(){var e=this._uniforms;for(var t in e){var r=e[t];if(r instanceof Array)for(var n=0;n<r.length;n++){var o=r[n];f(o)&&o.__removeChild(this)}else f(r)&&r.__removeChild(this)}}}]),t}(l),p=function(e){function t(e,r){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._data=s({},e,{contextChildren:e.contextChildren.map(function(e){return new t(e)}),children:e.children.map(function(e){return new t(e)}),uniforms:new h(e.uniforms)}),r&&(n.update=r),n.__attach(),n}return i(t,e),u(t,[{key:"__getValue",value:function(){var e=this._data,t=n(e,[]),r=e.contextChildren,o=e.width,i=e.height,a=e.children,s=e.uniforms;return t.width=f(o)?o.__getValue():o,t.height=f(i)?i.__getValue():i,t.contextChildren=r.map(function(e){return e.__getValue()}),t.children=a.map(function(e){return e.__getValue()}),t.uniforms=s.__getValue(),t}},{key:"__attach",value:function(){var e=this,t=this._data,r=t.contextChildren,n=t.children,o=t.uniforms,i=t.width,a=t.height;f(i)&&i.__addChild(this),f(a)&&a.__addChild(this),r.forEach(function(t){return t.__addChild(e)}),n.forEach(function(t){return t.__addChild(e)}),o.__addChild(this)}},{key:"__detach",value:function(){var e=this,t=this._data,r=t.contextChildren,n=t.children,o=t.uniforms,i=t.width,a=t.height;f(i)&&i.__removeChild(this),f(a)&&a.__removeChild(this),r.forEach(function(t){return t.__removeChild(e)}),n.forEach(function(t){return t.__removeChild(e)}),o.__removeChild(this)}}]),t}(l);e.exports=p},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(0),c=r(1);e.exports=function(e,t){c("function"==typeof e,"GL.createComponent(props => glnode) must have a function in parameter");var r=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),u(r,[{key:"render",value:function(){var t=e(s({},this.context,this.props));return c(t&&t.type&&(t.type.isGLNode||t.type.isGLComponent),"%s: The GL.createComponent function parameter must return a GL.Node or another GL Component",r.displayName),t}}]),r}(f.Component);if(r.isGLComponent=!0,r.displayName=e.name||"",t){c("object"===(void 0===t?"undefined":a(t)),"second parameter of createComponent must be an object of static fields to set in the React component. (example: propTypes, displayName)");for(var l in t)r[l]=t[l]}return r}},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){"undefined"!=typeof console&&console.debug&&console.debug("GL.Surface rendered with",e,t)}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),l=c.Component,h=c.PropTypes,p=r(1),d=r(63),_=d.fill,g=d.resolve,v=d.build,m=r(4),y=r(16),E=r(69),b=r(19),T=r(20),w=r(54),A=r(7),R=1;e.exports=function(e,t,r,d){var x=arguments.length<=4||void 0===arguments[4]?function(e){return e.refs.canvas}:arguments[4],O=function(l){function h(e,t){o(this,h);var r=i(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,t));return r._renderId=0,r._id=R++,r}return a(h,l),f(h,[{key:"componentWillMount",value:function(){m._onSurfaceWillMount(this._id),this._build(this.props),this._attach()}},{key:"componentWillUnmount",value:function(){this._renderId=0,m._onSurfaceWillUnmount(this._id),this._dataAnimated&&this._dataAnimated.__detach()}},{key:"componentWillReceiveProps",value:function(e){this._build(e),this._attach()}},{key:"_build",value:function(e){var t=this,r=this._id,n=++this._renderId,o=e.width,i=e.height,a=e.pixelRatio,f=e.children,l=e.debug,h=e.preload;p(f,"GL.Surface must have in children a GL.Node or a GL Component");var w=function(e){return e&&function(r,o){return n===t._renderId&&e(r,o)}},A=a||d(e);T(A,"GL.Surface: pixelRatio prop");var R={width:o,height:i,pixelRatio:A},x=b(c.createElement(y,u({shader:E},R,{uniforms:{t:f}})),R);p(x&&x.childGLNode,"GL.Surface must have in children a GL.Node or a GL Component");var O=x.via,S=x.childGLNode,N=x.context,I=void 0;try{m._beforeSurfaceBuild(r),I=g(_(v(S,N,h,O,r,w)))}catch(e){throw e}finally{m._afterSurfaceBuild(r)}this._resolved=I,this._pixelRatio=A,l&&s(I.data,I.contentsVDOM)}},{key:"_attach",value:function(){var e=this,t=this._dataAnimated,r=function(){var t=e.getGLCanvas();if(t)if(t.setNativeProps){var r=e._dataAnimated.__getValue();t.setNativeProps({data:r})}else e.forceUpdate()};this._dataAnimated=new w(this._resolved.data,r),t&&t.__detach()}},{key:"getGLCanvas",value:function(){return x(this)}},{key:"captureFrame",value:function(){var e=this.getGLCanvas();return p(e,"c is '%s'. Is the component unmounted?",e),p(e.captureFrame,"captureFrame() should be implemented by GLCanvas"),e.captureFrame.apply(e,arguments)}},{key:"render",value:function(){var o=this._renderId,i=this._resolved,a=i.contentsVDOM,s=i.imagesToPreload,f=this._dataAnimated.__getValue(),c=this._pixelRatio,l=this.props,h=(l.children,l.debug,l.preload,l.style),p=l.width,d=l.height,_=l.backgroundColor,g=l.visibleContent,v=l.eventsThrough,m=n(l,["children","debug","preload","style","width","height","backgroundColor","visibleContent","eventsThrough"]);return e({width:p,height:d,style:h,visibleContent:g,eventsThrough:v},a.map(function(e,r){return t(f.width,f.height,e.key||r,A.decorateVDOMContent(e),{visibleContent:g})}),r(u({},m,{style:{backgroundColor:_},width:p,height:d,pixelRatio:c,data:f,nbContentTextures:a.length,imagesToPreload:s,renderId:o,visibleContent:g,eventsThrough:v})))}}]),h}(l);return O.displayName="GL.Surface",O.propTypes={width:h.any.isRequired,height:h.any.isRequired,backgroundColor:h.string,pixelRatio:h.number,children:h.element.isRequired,preload:h.bool,autoRedraw:h.bool,eventsThrough:h.bool,visibleContent:h.bool,onLoad:h.func,onProgress:h.func},O.defaultProps={preload:!1,autoRedraw:!1,eventsThrough:!1,visibleContent:!1,backgroundColor:"#000"},O}},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(7),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=r(0),f=r(1),c=r(17),l=r(4),h=r(18),p=r(58),d=r(19),_=r(20);e.exports=function e(t,r,a,g,v,m){var y=t.props,E=l._resolve(y.shader,v,m(y.onShaderCompile)),b=y.uniforms,T=i({},r,y),w=T.width,A=T.height,R=T.pixelRatio,x={width:w,height:A,pixelRatio:R},O=y.children,S="preload"in y?y.preload:a;f(l.exists(E),"Shader #%s does not exists",E);var N=l.get(E).name;_(R,"GL Component ("+N+"). pixelRatio prop");var I=i({},b),C=[],P=[];return u.Children.forEach(O,function(e){f(e.type===c,"(Shader '%s') GL.Node can only contains children of type GL.Uniform. Got '%s'",N,e.type&&e.type.displayName||e);var t=e.props,r=t.name,o=t.children,i=n(t,["name","children"]);f("string"==typeof r&&r,"(Shader '%s') GL.Uniform must define an name String",N),f(!(b&&r in b),"(Shader '%s') The uniform '%s' set by GL.Uniform must not be in {uniforms} props",N),f(!(r in I),"(Shader '%s') The uniform '%s' set by GL.Uniform must not be defined in another GL.Uniform",N),I[r]=!o||o.value?o:{value:o,opts:i}}),Object.keys(I).forEach(function(t){var r=I[t],n=void 0;r&&"object"===(void 0===r?"undefined":o(r))&&!r.prototype&&"value"in r&&("object"===o(r.opts)&&(n=r.opts),r=r.value),r=s.default.decorateUniformValue(r);try{switch(p(r)){case"string":I[t]=h.withOpts(h.URI({uri:r}),n);break;case"{uri}":I[t]=h.withOpts(h.URI(r),n);break;case"ndarray":I[t]=h.withOpts(h.NDArray(r),n);break;case"vdom[]":case"vdom":var i=d(r,x);if(i){var a=i.childGLNode,u=i.via,f=i.context;C.push({vdom:r,uniform:t,data:e(a,f,S,u,v,m)})}else P.push({vdom:r,uniform:t,opts:n});break;default:I[t]=r}}catch(e){delete I[t];var c="Shader '"+N+"': uniform '"+t+"' "+e.message;throw new Error(c)}}),{shader:E,uniforms:I,width:w,height:A,pixelRatio:R,children:C,contents:P,preload:S,via:g}}},function(e,t,r){"use strict";function n(e){var t=void 0===e?"undefined":o(e);if("number"===t){if(isNaN(e)||!isFinite(e))throw new Error("invalid number: '"+e+"'");return t}if("boolean"===t)return t;if("string"===t)return t;if("undefined"===t)return null;if("object"===t){if(!e)return null;if("string"==typeof e.uri)return"{uri}";if(e.data&&e.shape&&e.stride)return"ndarray";if(e instanceof Array){var r=e.length;if(!r)throw new Error("array is empty");for(var s=!1,u=!1,f=!1,c=!1,l=0;l<r;l++){var h=e[l];switch(void 0===h?"undefined":o(h)){case"object":if(h&&a(h))s=!0;else{if(!h||!i.isValidElement(h)){if(h instanceof Array)return n(h);throw new Error("at index "+l+", Unrecognized object: '"+h+"'")}u=!0}break;case"number":if(isNaN(h)||!isFinite(h))throw new Error("at index "+l+", invalid number: '"+h+"'");f=!0;break;case"boolean":c=!0;break;default:throw new Error("at index "+l+", Unrecognized object: "+h)}}if((f||c||s)&&u)throw new Error("Invalid array. Found both VDOM value and numbers/booleans/animated");if(u)return"vdom[]";if(s)return"animated[]";if(f)return"number[]";if(c)return"boolean[]"}if(a(e))return"animated";if(i.isValidElement(e))return"vdom"}throw new Error("Unrecognized object: "+e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=r(0),a=r(21);e.exports=n},function(e,t,r){"use strict";function n(e){var t=[];for(var r in e){var n=e[r];n&&"object"===(void 0===n?"undefined":o(n))&&"uri"===n.type&&n.uri&&"string"==typeof n.uri&&t.push(n)}return t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=n},function(e,t,r){"use strict";function n(e){function t(e){var r=[e.vdom],n=[e.data],i=e.data.children.map(function(e){var o=t(e);return r.indexOf(o.vdom)===-1&&(r.push(o.vdom),n.push(o.data)),o.descendantsVDOM.forEach(function(e,t){r.indexOf(e)===-1&&(r.push(e),n.push(o.descendantsVDOMData[t]))}),o});return o({},e,{data:o({},e.data,{children:i}),descendantsVDOM:r,descendantsVDOMData:n})}return t({data:e}).data}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=n},function(e,t,r){"use strict";function n(e,t){var r=[],n=[];return e.children.map(function(e){r=r.concat(e.descendantsVDOM),n=n.concat(e.descendantsVDOMData)}),r.map(function(r,o){if(t.indexOf(r)===-1)for(var i=0,a=0;a<e.children.length;a++)if(e.children[a].descendantsVDOM.indexOf(r)!==-1&&++i>1)return{data:n[o],vdom:r}}).filter(function(e){return e})}e.exports=n},function(e,t,r){"use strict";function n(e){function t(e){e.contents.forEach(function(e){r.indexOf(e.vdom)===-1&&(r.push(e.vdom),n.push(e))}),e.children.forEach(function(e){t(e.data)})}var r=[],n=[];return t(e),n}e.exports=n},function(e,t,r){"use strict";e.exports={build:r(57),fill:r(60),resolve:r(66)}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e){return 1===n.Children.count(e)?e instanceof Array?e[0]:e:null}},function(e,t,r){"use strict";e.exports=function(e,t){var r={};return t.forEach(function(t){e.hasOwnProperty(t)&&(r[t]=e[t])}),r}},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e){function t(e,o,s,l){var p=e.uniforms,d=e.children,_=e.contents,g=e.preload,v=n(e,["uniforms","children","contents","preload"]),m=i({},p),y=s.map(function(e){return e.vdom}),E=function(e){return function(){for(e++;e===o||l.indexOf(e)!==-1;)e++;return e}}(-1),b=u(e,y),T=b.map(function(e){return{vdom:e.vdom,fboId:E()}}),w=s.concat(T),A=w.map(function(e){return e.vdom}),R=w.map(function(e){return e.fboId}),x=[],O=[],S=d.concat(b).map(function(e){var t=e.uniform,r=e.vdom,n=e.data,o=A.indexOf(r),i=void 0,a=void 0;return o===-1?(i=E(),a=O):(i=w[o].fboId,o>=s.length&&(a=x)),t&&(m[t]=f.Framebuffer(i)),{data:n,fboId:i,addToCollection:a}}),N=S.map(function(e){return e.fboId}),I=l.concat(R).concat(N),C=[];return S.forEach(function(e){var r=e.data,n=e.fboId,o=e.addToCollection;C.indexOf(n)===-1&&(C.push(n),o&&o.unshift(t(r,n,w,I)))}),_.forEach(function(e){var t=e.uniform,r=e.vdom,n=e.opts,o=h.indexOf(r);a(o!==-1,"contents was discovered by findContentsMeta"),m[t]=f.withOpts(f.Content(o),n)}),g&&(r=r.concat(c(p))),i({},v,{uniforms:m,contextChildren:x,children:O,fboId:o})}var r=[],o=s(e),h=o.map(function(e){return e.vdom});return{data:t(e,-1,[],[]),contentsVDOM:h,imagesToPreload:l(r)}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(1),s=r(62),u=r(61),f=r(18),c=r(59),l=r(68);e.exports=o},function(e,t,r){"use strict";var n=r(64);e.exports=function(e,t,r){var o=e.type;if(o.isGLComponent){var i=new o;i.props=e.props,i.context=t;var a=n(i.render()),s=o.displayName||o.name||"";return r.push(s),a}}},function(e,t,r){"use strict";function n(e){var t=[],r=[];return e.forEach(function(e){t.indexOf(e.uri)===-1&&(t.push(e.uri),r.push(e))}),r}e.exports=n},function(e,t,r){"use strict";var n=r(4),o="(gl-react-post)";e.exports=n.create(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},o,{frag:"\nprecision highp float;\nvarying vec2 uv;\nuniform sampler2D t;\nvoid main(){\n  gl_FragColor=texture2D(t,uv);\n}"}))[o]},function(e,t,r){"use strict";function n(e,t,r,n,o,i){this._gl=e,this._wrapper=t,this._index=r,this._locations=n,this._dimension=o,this._constFunc=i}function o(e,t,r,o,i,a,s){for(var u=["gl","v"],f=[],c=0;c<i;++c)u.push("x"+c),f.push("x"+c);u.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var l=Function.apply(null,u),h=new n(e,t,r,o,i,l);Object.defineProperty(a,s,{set:function(t){return e.disableVertexAttribArray(o[r]),l(e,o[r],t),t},get:function(){return h},enumerable:!0})}function i(e,t,r,n,i,a,s){for(var u=new Array(i),f=new Array(i),c=0;c<i;++c)o(e,t,r[c],n,i,u,c),f[c]=u[c];Object.defineProperty(u,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<i;++t)f[t].location=e[t];else for(var t=0;t<i;++t)f[t].location=e+t;return e},get:function(){for(var e=new Array(i),t=0;t<i;++t)e[t]=n[r[t]];return e},enumerable:!0}),u.pointer=function(t,o,a,s){t=t||e.FLOAT,o=!!o,a=a||i*i,s=s||0;for(var u=0;u<i;++u){var f=n[r[u]];e.vertexAttribPointer(f,i,t,o,a,s+u*i),e.enableVertexAttribArray(f)}};var l=new Array(i),h=e["vertexAttrib"+i+"fv"];Object.defineProperty(a,s,{set:function(t){for(var o=0;o<i;++o){var a=n[r[o]];if(e.disableVertexAttribArray(a),Array.isArray(t[0]))h.call(e,a,t[o]);else{for(var s=0;s<i;++s)l[s]=t[i*o+s];h.call(e,a,l)}}return t},get:function(){return u},enumerable:!0})}function a(e,t,r,n){for(var a={},u=0,f=r.length;u<f;++u){var c=r[u],l=c.name,h=c.type,p=c.locations;switch(h){case"bool":case"int":case"float":o(e,t,p[0],n,1,a,l);break;default:if(h.indexOf("vec")>=0){var d=h.charCodeAt(h.length-1)-48;if(d<2||d>4)throw new s("","Invalid data type for attribute "+l+": "+h);o(e,t,p[0],n,d,a,l)}else{if(!(h.indexOf("mat")>=0))throw new s("","Unknown data type for attribute "+l+": "+h);var d=h.charCodeAt(h.length-1)-48;if(d<2||d>4)throw new s("","Invalid data type for attribute "+l+": "+h);i(e,t,p,n,d,a,l)}}}return a}e.exports=a;var s=r(5),u=n.prototype;u.pointer=function(e,t,r,n){var o=this,i=o._gl,a=o._locations[o._index];i.vertexAttribPointer(a,o._dimension,e||i.FLOAT,!!t,r||0,n||0),i.enableVertexAttribArray(a)},u.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}})},function(e,t,r){"use strict";function n(e){return new Function("y","return function(){return y}")(e)}function o(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function i(e,t,r,i){function u(r){return new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+r+"])}")(e,t,i)}function f(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var o=r.charCodeAt(r.length-1)-48;if(o<2||o>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+o+"fv(locations["+t+"],false,obj"+e+")"}throw new s("","Unknown uniform data type for "+name+": "+r)}var o=r.charCodeAt(r.length-1)-48;if(o<2||o>4)throw new s("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+o+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+o+"fv(locations["+t+"],obj"+e+")";default:throw new s("","Unrecognized data type for vector "+name+": "+r)}}}function c(e,t){if("object"!=typeof t)return[[e,t]];var r=[];for(var n in t){var o=t[n],i=e;parseInt(n)+""===n?i+="["+n+"]":i+="."+n,"object"==typeof o?r.push.apply(r,c(i,o)):r.push([i,o])}return r}function l(t){for(var n=["return function updateProperty(obj){"],o=c("",t),a=0;a<o.length;++a){var s=o[a],u=s[0],l=s[1];i[l]&&n.push(f(u,l,r[l].type))}return n.push("return obj}"),new Function("gl","locations",n.join("\n"))(e,i)}function h(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4)throw new s("","Invalid data type");return"b"===e.charAt(0)?o(r,!1):o(r,0)}if(0===e.indexOf("mat")&&4===e.length){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+e);return o(r*r,0)}throw new s("","Unknown uniform data type for "+name+": "+e)}}function p(e,t,o){if("object"==typeof o){var a=d(o);Object.defineProperty(e,t,{get:n(a),set:l(o),enumerable:!0,configurable:!1})}else i[o]?Object.defineProperty(e,t,{get:u(o),set:l(o),enumerable:!0,configurable:!1}):e[t]=h(r[o].type)}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)p(t,r,e[r])}else{t={};for(var n in e)p(t,n,e[n])}return t}var _=a(r,!0);return{get:n(d(_)),set:l(_),enumerable:!0,configurable:!0}}var a=r(23),s=r(5);e.exports=i},function(e,t,r){"use strict";function n(e,t){if(!s){var r=Object.keys(a);s={};for(var n=0;n<r.length;++n){var o=r[n];s[e[o]]=a[o]}}return s[t]}function o(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=[],i=0;i<r;++i){var a=e.getActiveUniform(t,i);if(a){var s=n(e,a.type);if(a.size>1)for(var u=0;u<a.size;++u)o.push({name:a.name.replace("[0]","["+u+"]"),type:s});else o.push({name:a.name,type:s})}}return o}function i(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=[],i=0;i<r;++i){var a=e.getActiveAttrib(t,i);a&&o.push({name:a.name,type:n(e,a.type)})}return o}t.uniforms=o,t.attributes=i;var a={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},s=null},function(e,t,r){"use strict";function n(e,t,r,n,o,i,a){this.id=e,this.src=t,this.type=r,this.shader=n,this.count=i,this.programs=[],this.cache=a}function o(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function i(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(n);try{var i=l(o,r,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new c(o,"Error compiling shader:\n"+o)}throw new c(o,i.short,i.long)}return n}function a(e,t,r,n,o){var i=e.createProgram();e.attachShader(i,t),e.attachShader(i,r);for(var a=0;a<n.length;++a)e.bindAttribLocation(i,o[a],n[a]);if(e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var s=e.getProgramInfoLog(i);throw new c(s,"Error linking program: "+s)}return i}function s(e){var t=p.get(e);return t||(t=new o(e),p.set(e,t)),t}function u(e,t,r){return s(e).getShaderReference(t,r)}function f(e,t,r,n,o){return s(e).getProgram(t,r,n,o)}t.shader=u,t.program=f;var c=r(5),l=r(46),h="undefined"==typeof WeakMap?r(97):WeakMap,p=new h,d=0;n.prototype.dispose=function(){if(0==--this.count){for(var e=this.cache,t=e.gl,r=this.programs,n=0,o=r.length;n<o;++n){var i=e.programs[r[n]];i&&(delete e.programs[n],t.deleteProgram(i))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var _=o.prototype;_.getShaderReference=function(e,t){var r=this.gl,o=this.shaders[e===r.FRAGMENT_SHADER|0],a=o[t];if(a&&r.isShader(a.shader))a.count+=1;else{var s=i(r,e,t);a=o[t]=new n(d++,t,e,s,[],1,this)}return a},_.getProgram=function(e,t,r,n){var o=[e.id,t.id,r.join(":"),n.join(":")].join("@"),i=this.programs[o];return i&&this.gl.isProgram(i)||(this.programs[o]=i=a(this.gl,e.shader,t.shader,r,n),e.programs.push(o),t.programs.push(o)),i}},function(e,t,r){function n(e){for(var t=Array.isArray(e)?e:o(e),r=0;r<t.length;r++){var n=t[r];if("preprocessor"===n.type){var a=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var s=a[1],u=a[2];return(s?i(u):u).trim()}}}}var o=r(79),i=r(32);e.exports=n},function(e,t,r){function n(e){function t(e){e.length&&G.push({type:w[k],data:e,position:Y,line:X,column:H})}function r(e){j=0,W+=e,D=W.length;for(var t;U=W[j],j<D;){switch(t=j,k){case l:j=S();break;case h:j=O();break;case p:j=x();break;case d:j=N();break;case _:j=P();break;case T:j=C();break;case g:j=M();break;case c:j=L();break;case E:j=R();break;case f:j=A()}if(t!==j)switch(W[t]){case"\n":H=0,++X;break;default:++H}}return B+=j,W=W.slice(j),G}function n(e){return V.length&&t(V.join("")),k=b,t("(eof)"),G}function A(){return V=V.length?[]:V,"/"===F&&"*"===U?(Y=B+j-1,k=l,F=U,j+1):"/"===F&&"/"===U?(Y=B+j-1,k=h,F=U,j+1):"#"===U?(k=p,Y=B+j,j):/\s/.test(U)?(k=E,Y=B+j,j):(z=/\d/.test(U),q=/[^\w_]/.test(U),Y=B+j,k=z?_:q?d:c,j)}function R(){return/[^\s]/g.test(U)?(t(V.join("")),k=f,j):(V.push(U),F=U,j+1)}function x(){return"\r"!==U&&"\n"!==U||"\\"===F?(V.push(U),F=U,j+1):(t(V.join("")),k=f,j)}function O(){return x()}function S(){return"/"===U&&"*"===F?(V.push(U),t(V.join("")),k=f,j+1):(V.push(U),F=U,j+1)}function N(){if("."===F&&/\d/.test(U))return k=g,j;if("/"===F&&"*"===U)return k=l,j;if("/"===F&&"/"===U)return k=h,j;if("."===U&&V.length){for(;I(V););return k=g,j}if(";"===U||")"===U||"("===U){if(V.length)for(;I(V););return t(U),k=f,j+1}var e=2===V.length&&"="!==U;if(/[\w_\d\s]/.test(U)||e){for(;I(V););return k=f,j}return V.push(U),F=U,j+1}function I(e){for(var r,n,o=0;;){if(r=i.indexOf(e.slice(0,e.length+o).join("")),n=i[r],r===-1){if(o--+e.length>0)continue;n=e.slice(0,1).join("")}return t(n),Y+=n.length,V=V.slice(n.length),V.length}}function C(){return/[^a-fA-F0-9]/.test(U)?(t(V.join("")),k=f,j):(V.push(U),F=U,j+1)}function P(){return"."===U?(V.push(U),k=g,F=U,j+1):/[eE]/.test(U)?(V.push(U),k=g,F=U,j+1):"x"===U&&1===V.length&&"0"===V[0]?(k=T,V.push(U),F=U,j+1):/[^\d]/.test(U)?(t(V.join("")),k=f,j):(V.push(U),F=U,j+1)}function M(){return"f"===U&&(V.push(U),F=U,j+=1),/[eE]/.test(U)?(V.push(U),F=U,j+1):"-"===U&&/[eE]/.test(F)?(V.push(U),F=U,j+1):/[^\d]/.test(U)?(t(V.join("")),k=f,j):(V.push(U),F=U,j+1)}function L(){if(/[^\d\w_]/.test(U)){var e=V.join("");return k=Z.indexOf(e)>-1?y:K.indexOf(e)>-1?m:v,t(V.join("")),k=f,j}return V.push(U),F=U,j+1}var U,F,D,j=0,B=0,k=f,V=[],G=[],X=1,H=0,Y=0,z=!1,q=!1,W="";e=e||{};var K=a,Z=o;return"300 es"===e.version&&(K=u,Z=s),function(e){return G=[],null!==e?r(e.replace?e.replace(/\r\n/g,"\n"):e):n()}}e.exports=n;var o=r(25),i=r(78),a=r(24),s=r(77),u=r(76),f=999,c=9999,l=0,h=1,p=2,d=3,_=4,g=5,v=6,m=7,y=8,E=9,b=10,T=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},function(e,t,r){var n=r(24);n=n.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},function(e,t,r){var n=r(25);e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},function(e,t){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},function(e,t,r){function n(e,t){var r=o(t),n=[];return n=n.concat(r(e)),n=n.concat(r(null))}var o=r(75);e.exports=n},function(e,t){t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,f=u>>1,c=-7,l=r?o-1:0,h=r?-1:1,p=e[t+l];for(l+=h,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+l],l+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[t+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=f}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,u,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=c?(s=0,a=c):a+l>=1?(s=(t*u-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,f+=o;f>0;e[r+p]=255&a,p+=d,a/=256,f-=8);e[r+p-d]|=128*_}},function(e,t,r){"use strict";function n(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}e.exports=n},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||n(e)||!!e._isBuffer)}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";function n(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){return a({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}function i(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(o(e))}var a=r(37),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in u){var r=u[e];t[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:e+"seq"})}}();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in f){var r=f[e];t[e]=i({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:e}),t[e+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var r=c[e];t[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<l.length;++e){var r=l[e];t[r]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),t[r+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var r=h[e];t[r]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),t[r+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),t[r+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),t[r+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var r=p[e];t[r+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),t[r+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),t[r+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),t[r+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),t.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(e,t,r){function n(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var o=new Array(r.length);for(e=0;e<o.length;++e)o[e]=r[e][1];return o}function i(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n="generic"===e;if(t===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",a=new Function(i);return a()}if(0===t){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",a=new Function("TrivialArray",i);return a(l[e][0])}var i=["'use strict'"],s=u(t),f=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=s.map(function(e){return"b"+e}).join(","),p=s.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+r+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+f.join(",")+",v){"),n?i.push("return this.data.set("+c+",v)}"):i.push("return this.data["+c+"]=v}"),i.push("proto.get=function "+r+"_get("+f.join(",")+"){"),n?i.push("return this.data.get("+c+")}"):i.push("return this.data["+c+"]}"),i.push("proto.index=function "+r+"_index(",f.join(),"){return "+c+"}"),i.push("proto.hi=function "+r+"_hi("+f.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),_=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+f.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+_.join(","));for(var g=0;g<t;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");i.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+f.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var g=0;g<t;++g)i.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");i.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var v=new Array(t),m=new Array(t),g=0;g<t;++g)v[g]="a[i"+g+"]",m[g]="b[i"+g+"]";i.push("proto.transpose=function "+r+"_transpose("+f+"){"+f.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+m.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+f+"){var a=[],b=[],c=this.offset");for(var g=0;g<t;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",i.join("\n"));return a(l[e],o)}function a(e){if(f(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,r,n){if(void 0===e){var o=l.array[0];return o([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===r){r=new Array(s);for(var u=s-1,f=1;u>=0;--u)r[u]=f,f*=t[u]}if(void 0===n){n=0;for(var u=0;u<s;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var c=a(e),h=l[c];h.length<=s+1;)h.push(i(c,h.length-1));var o=h[s+1];return o(e,t,r,n)}var u=r(81),f=r(82),c="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s},function(e,t,r){"use strict";/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
var n=r(90);e.exports=function(e,t,r){return r=void 0!==r?r+"":" ",n(r,t)+e}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){_&&p&&(_=!1,p.length?d=p.concat(d):g=-1,d.length&&s())}function s(){if(!_){var e=o(a);_=!0;for(var t=d.length;t;){for(p=d,d=[];++g<t;)p&&p[g].run();g=-1,t=d.length}p=null,_=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function f(){}var c,l,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var p,d=[],_=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||_||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){(function(t){function r(e){return null==e&&(e=t.Promise),this instanceof r?n(e,this):n(e,Object.create(r.prototype))}function n(e,t){return t.promise=new e(function(e,r){t.resolve=e,t.reject=r}),t}e.exports=r,r.defer=n}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(0),c=(n(f),r(10)),l=n(c),h=r(91),p=n(h),d=r(42),_=n(d),g=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.measure=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props.includeMargin,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.props.useClone;if(r.props.shouldMeasure){r._node.parentNode||r._setDOMNode();var n=r.getDimensions(r._node,e,t),o="function"==typeof r.props.children;r._propsToMeasure.some(function(e){if(n[e]!==r._lastDimensions[e])return r.props.onMeasure(n),o&&void 0!==r&&r.setState({dimensions:n}),r._lastDimensions=n,!0})}},r.state={dimensions:{width:0,height:0,top:0,right:0,bottom:0,left:0}},r._node=null,r._propsToMeasure=r._getPropsToMeasure(e),r._lastDimensions={},r}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;this._setDOMNode(),this.measure(),this.resizeObserver=new p.default(function(){return e.measure()}),this.resizeObserver.observe(this._node)}},{key:"componentWillReceiveProps",value:function(e){var t=(e.config,e.whitelist),r=e.blacklist;this.props.whitelist===t&&this.props.blacklist===r||(this._propsToMeasure=this._getPropsToMeasure({whitelist:t,blacklist:r}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver.disconnect(this._node),this._node=null}},{key:"_setDOMNode",value:function(){this._node=l.default.findDOMNode(this)}},{key:"getDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._node,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.includeMargin,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.useClone,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props.cloneOptions;return(0,_.default)(e,s({margin:t,clone:r},n))}},{key:"_getPropsToMeasure",value:function(e){var t=e.whitelist,r=e.blacklist;return t.filter(function(e){return r.indexOf(e)<0})}},{key:"render",value:function(){var e=this.props.children;return f.Children.only("function"==typeof e?e(this.state.dimensions):e)}}]),t}(f.Component);g.propTypes={whitelist:f.PropTypes.array,blacklist:f.PropTypes.array,includeMargin:f.PropTypes.bool,useClone:f.PropTypes.bool,cloneOptions:f.PropTypes.object,shouldMeasure:f.PropTypes.bool,onMeasure:f.PropTypes.func},g.defaultProps={whitelist:["width","height","top","right","bottom","left"],blacklist:[],includeMargin:!0,useClone:!1,cloneOptions:{},shouldMeasure:!0,onMeasure:function(){return null}},t.default=g,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var r=e.length*t;if(o!==e||void 0===o)o=e,i="";else if(i.length>=r)return i.substr(0,r);for(;r>i.length&&t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+=e,i=i.substr(0,r)}/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
var o,i="";e.exports=n},function(e,t,r){"use strict";(function(e){function r(e){return parseFloat(e)||0}function n(e){return Array.prototype.slice.call(arguments,1).reduce(function(t,n){return t+r(e["border-"+n+"-width"])},0)}function o(e){for(var t=["top","right","bottom","left"],n={},o=0,i=t;o<i.length;o+=1){var a=i[o],s=e["padding-"+a];n[a]=r(s)}return n}function i(e){var t=e.getBBox();return c(0,0,t.width,t.height)}function a(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return b;var a=getComputedStyle(e),u=o(a),f=u.left+u.right,l=u.top+u.bottom,h=r(a.width),p=r(a.height);if("border-box"===a.boxSizing&&(Math.round(h+f)!==t&&(h-=n(a,"left","right")+f),Math.round(p+l)!==i&&(p-=n(a,"top","bottom")+l)),!s(e)){var d=Math.round(h+f)-t,_=Math.round(p+l)-i;1!==Math.abs(d)&&(h-=d),1!==Math.abs(_)&&(p-=_)}return c(u.left,u.top,h,p)}function s(e){return e===document.documentElement}function u(e){return p?T(e)?i(e):a(e):b}function f(e){var t=e.x,r=e.y,n=e.width,o=e.height,i="function"==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return E(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}function c(e,t,r,n){return{x:e,y:t,width:r,height:n}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){return void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),h=function(){function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return"function"==typeof l.Map?l.Map:function(){function t(){this.__entries__=[]}var r={size:{}};return r.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){var r=this;void 0===t&&(t=null);for(var n=0,o=r.__entries__;n<o.length;n+=1){var i=o[n];e.call(t,i[1],i[0])}},Object.defineProperties(t.prototype,r),t}()}(),p=l.window===l&&"undefined"!=typeof document,d=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),_=2,g=function(){var e=Date;return"object"==typeof performance&&"function"==typeof performance.now&&(e=performance),function(){return e.now()}}(),v=function(e,t,r){function n(){a=!1,e(),s&&i()}function o(){r?d(n):n()}function i(){var e=g();if(a){if(e-u<_)return;s=!0}else a=!0,s=!1,setTimeout(o,t);u=e}void 0===r&&(r=!1);var a=!1,s=!1,u=0;return i},m="function"==typeof MutationObserver&&"object"==typeof navigator&&!("Netscape"===navigator.appName&&navigator.userAgent.match(/Trident\/.*rv:11/)),y=function(){this.isCycleContinuous_=!m,this.listenersEnabled_=!1,this.mutationsObserver_=null,this.observers_=[],this.refresh=v(this.refresh.bind(this),20,!0),this.continuousUpdateHandler_=v(this.refresh,80)};y.prototype.connect=function(e){this.isConnected(e)||this.observers_.push(e),this.listenersEnabled_||this.addListeners_()},y.prototype.disconnect=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.listenersEnabled_&&this.removeListeners_()},y.prototype.isConnected=function(e){return!!~this.observers_.indexOf(e)},y.prototype.refresh=function(){this.updateObservers_()?this.refresh():this.isCycleContinuous_&&this.listenersEnabled_&&this.continuousUpdateHandler_()},y.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},y.prototype.addListeners_=function(){p&&!this.listenersEnabled_&&(window.addEventListener("resize",this.refresh),document.addEventListener("transitionend",this.refresh),m&&(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.listenersEnabled_=!0,this.isCycleContinuous_&&this.refresh())},y.prototype.removeListeners_=function(){p&&this.listenersEnabled_&&(window.removeEventListener("resize",this.refresh),document.removeEventListener("transitionend",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationsObserver_=null,this.listenersEnabled_=!1)};var E=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r+=1){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerbale:!1,writable:!1,configurable:!0})}return e},b=c(0,0,0,0),T=function(){return"function"==typeof SVGGraphicsElement?function(e){return e instanceof SVGGraphicsElement}:function(e){return e instanceof SVGElement&&"function"==typeof e.getBBox}}(),w=function(e){this.target=e,this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=c(0,0,0,0)};w.prototype.isActive=function(){var e=u(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},w.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var A=function(e,t){var r=f(t);E(this,{target:e,contentRect:r})},R=function(e,t,r){if("function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.activeTargets_=[],this.observationTargets_=new h,this.callback_=e,this.controller_=t,this.callbackCtx_=r};R.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("Element"in l&&Element instanceof Object){if(!(e instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observationTargets_;t.has(e)||(t.set(e,new w(e)),this.controller_.isConnected(this)||this.controller_.connect(this),this.controller_.refresh())}},R.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("Element"in l&&Element instanceof Object){if(!(e instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observationTargets_;t.has(e)&&(t.delete(e),t.size||this.controller_.disconnect(this))}},R.prototype.disconnect=function(){this.clearActive(),this.observationTargets_.clear(),this.controller_.disconnect(this)},R.prototype.gatherActive=function(){this.clearActive();var e=this.activeTargets_;this.observationTargets_.forEach(function(t){t.isActive()&&e.push(t)})},R.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeTargets_.map(function(e){return new A(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},R.prototype.clearActive=function(){this.activeTargets_.splice(0)},R.prototype.hasActive=function(){return this.activeTargets_.length>0};var x=new y,O="function"==typeof WeakMap?new WeakMap:new h,S=function(e){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=new R(e,x,this);O.set(this,t)};["observe","unobserve","disconnect"].forEach(function(e){S.prototype[e]=function(){var t;return(t=O.get(this))[e].apply(t,arguments)}});var N=function(){return"function"==typeof l.ResizeObserver?l.ResizeObserver:S}();t.default=N}).call(t,r(2))},function(e,t,r){!function(e){function r(){var e=arguments[0],t=r.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=r.parse(e)),r.format.call(null,t[e],arguments)}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,t){return Array(t+1).join(e)}var i={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};r.format=function(e,t){var a,s,u,f,c,l,h,p=1,d=e.length,_="",g=[],v=!0,m="";for(s=0;s<d;s++)if("string"===(_=n(e[s])))g[g.length]=e[s];else if("array"===_){if(f=e[s],f[2])for(a=t[p],u=0;u<f[2].length;u++){if(!a.hasOwnProperty(f[2][u]))throw new Error(r("[sprintf] property '%s' does not exist",f[2][u]));a=a[f[2][u]]}else a=f[1]?t[f[1]]:t[p++];if("function"==n(a)&&(a=a()),i.not_string.test(f[8])&&i.not_json.test(f[8])&&"number"!=n(a)&&isNaN(a))throw new TypeError(r("[sprintf] expecting number but found %s",n(a)));switch(i.number.test(f[8])&&(v=a>=0),f[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,f[6]?parseInt(f[6]):0);break;case"e":a=f[7]?a.toExponential(f[7]):a.toExponential();break;case"f":a=f[7]?parseFloat(a).toFixed(f[7]):parseFloat(a);break;case"g":a=f[7]?parseFloat(a).toPrecision(f[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&f[7]?a.substring(0,f[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}i.json.test(f[8])?g[g.length]=a:(!i.number.test(f[8])||v&&!f[3]?m="":(m=v?"+":"-",a=a.toString().replace(i.sign,"")),l=f[4]?"0"===f[4]?"0":f[4].charAt(1):" ",h=f[6]-(m+a).length,c=f[6]&&h>0?o(l,h):"",g[g.length]=f[5]?m+a+c:"0"===l?m+c+a:c+m+a)}return g.join("")},r.cache={},r.parse=function(e){for(var t=e,r=[],n=[],o=0;t;){if(null!==(r=i.text.exec(t)))n[n.length]=r[0];else if(null!==(r=i.modulo.exec(t)))n[n.length]="%";else{if(null===(r=i.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var a=[],s=r[2],u=[];if(null===(u=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=u[1];""!==(s=s.substring(u[0].length));)if(null!==(u=i.key_access.exec(s)))a[a.length]=u[1];else{if(null===(u=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=u[1]}r[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=r}t=t.substring(r[0].length)}return n};var a=function(e,t,n){return n=(t||[]).slice(0),n.splice(0,0,e),r.apply(null,n)};t.sprintf=r,t.vsprintf=a}("undefined"==typeof window||window)},function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,o=e[0],i=e[0],a=1;a<n;++a)if(i=o,o=e[a],t(o,i)){if(a===r){r++;continue}e[r++]=o}return e.length=r,e}function o(e){for(var t=1,r=e.length,n=e[0],o=e[0],i=1;i<r;++i,o=n)if(o=n,(n=e[i])!==o){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}function i(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),o(e))}e.exports=i},function(e,t,r){"use strict";function n(e){return e in c?c[e]:c[e]=o(e)}function o(e){var t,r=e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),n=u.length;if(void 0!==s[r])return r;for(r=i(e);n--;)if(t=u[n]+r,void 0!==s[t])return t;throw new Error("unable to prefix "+e)}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){var t=n(e),r=/([A-Z])/g;return r.test(t)&&(t=(f.test(t)?"-":"")+t.replace(r,"-$1")),t.toLowerCase()}var s=document.createElement("p").style,u="O ms Moz webkit".split(" "),f=/^(o|ms|moz|webkit)/,c={};e.exports=n,e.exports.dash=a},function(e,t,r){function n(){var e={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var r=t.valueOf(e);return r&&r.identity===e?r:o(t,e)}}var o=r(96);e.exports=n},function(e,t){function r(e,t){var r={identity:t},n=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:!0}),r}e.exports=r},function(e,t,r){function n(){var e=o();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){return e(t).value=r,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}var o=r(95);e.exports=n}]);